
function deletearticle(blogname,mid,crumb){if(window.confirm(YAHOO.Blog.Config.Text.CONFIRM_DELETE)){var url=YAHOO.Blog.Config.Url.BLOG+"/"+blogname+"/article?mid="+mid+"&_crumb="+crumb+"&delart=1&delthis=1";location.href=url;}}
function deletecmt(blogname,mid,cmtid,crumb){if(window.confirm(YAHOO.Blog.Config.Text.CONFIRM_DELETE)){var url=YAHOO.Blog.Config.Url.BLOG+"/"+blogname+"/article?mid="+mid+"&delcmts[]="+cmtid+"&_crumb="+crumb+"&delcmt=1";location.href=url;}}
function deletetbs(blogname,mid,tbid,crumb){if(window.confirm(YAHOO.Blog.Config.Text.CONFIRM_DELETE)){var url=YAHOO.Blog.Config.Url.BLOG+"/"+blogname+"/article?mid="+mid+"&tbid="+tbid+"&_crumb="+crumb+"&deltbs=1";location.href=url;}}
function deleteproph(blogname,prf_photo,crumb){if(window.confirm(YAHOO.Blog.Config.Text.CONFIRM_DELETE)){var url=YAHOO.Blog.Config.Url.BLOG+"/"+blogname+"/profile_photo?act=del&prf_photo="+prf_photo+"&.crumb="+crumb;location.href=url;}}
(function(){YAHOO.Blog.scriptFilter=function(oConditions){var i,n,j,arr,o;if(typeof oConditions==="object"){if(oConditions.variables&&oConditions.variables.length){for(i=0;i<oConditions.variables.length;i+=1){arr=oConditions.variables[i].split(".");o=window;for(n=(arr[0]==="window")?1:0;n<arr.length;n+=1){if(typeof o[arr[n]]==="undefined"){return false;}else{o=o[arr[n]];}}}}
if(oConditions.ids&&oConditions.ids.length){for(j=0;j<oConditions.ids.length;j+=1){if(typeof oConditions.ids[j]==="string"&&document.getElementById(oConditions.ids[j])!==null){return true;}}}
return false;}
throw new Error("Missing or invalid argument passed to YAHOO.Blog.scriptFilter");};YAHOO.Blog.utils={};YAHOO.Blog.utils.validateColor=function(formEl){var inputFields=YAHOO.util.Dom.getElementsByClassName("text","input",formEl);function isValidHex(hex){var matches=hex.match(/^#[0-9a-fA-F]{3}$|^#[0-9a-fA-F]{6}$/i);return matches?true:false;}
function hex326(hex){var arr=["#"];for(var i=1;i<hex.length;i++){arr.push(hex.charAt(i),hex.charAt(i));}
return arr.join("");}
for(var i=0;i<inputFields.length;i++){var hex=inputFields[i].value;if(isValidHex(hex)||hex===""){if(hex.length===4){inputFields[i].value=hex326(hex);}}else{return false;}}
return true;}
YAHOO.Blog.utils.diy_check_photo=function(folder,number){if(folder==''){return;}
if(number==1){document.mainFrm.backgroundType[2].checked=true;}else if(number==2){document.customize_diy.check_title_img.checked=true;if(folder==-1){document.customize_diy.title_img[0].checked=true;return;}else{document.customize_diy.title_img[1].checked=true;}}
var crumb=document.getElementById('crumb').value;YAHOO.Blog.utils.openwin(YAHOO.Blog.Config.Url.BLOG+'/api/fe/photo_choose?folder='+folder+'&.crumb='+crumb,'prf_photo','800','500','front');};YAHOO.Blog.utils.openwin=function(mypage,myname,w,h,infocus){settings="width="+w+",height="+h+",top=0,left=0,scrollbars=yes,location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no";var win=window.open(mypage,myname,settings);if(win){win.focus();}};YAHOO.Blog.utils.insertPhoto=function(value){if(document.getElementById('theme-step-3')||document.getElementById('blog-edit-panel')){var loader=YAHOO.Blog.dialogueLoader;var displaySpan=document.getElementById('bgImageFromPhotobook_display');if(loader&&loader.dialogueContainer){var formEl=YAHOO.Blog.dialogueLoader.dialogueContainer.getElementsByTagName("form")[0];if(formEl&&formEl.bgImageFromPhotobook){if(value===undefined){formEl.bgImageFromPhotobook.value='';if(displaySpan){displaySpan.innerHTML='';}}
else{formEl.bgImageFromPhotobook.value=value;if(displaySpan){displaySpan.innerHTML=value;}}}}}else if(document.getElementById('profile_photo')){var selectedNumber=document.getElementById('selectedPhotoUpdate').value;var gallerySpan=document.getElementById('gallery_'+selectedNumber);var galleryInput=document.getElementById('gallery_file'+selectedNumber);if(gallerySpan&&galleryInput){if(value==undefined){gallerySpan.innerHTML=YAHOO.Blog.Config.Error.NO_PHOTO_SELECTED;galleryInput.value="";}else{gallerySpan.innerHTML=value;galleryInput.value=value;}}}};YAHOO.Blog.utils.getModEl=function(element){for(var el=element.parentNode;el;el=el.parentNode){if(YAHOO.util.Dom.hasClass(el,"mod_all")){return el;}}
return false;};YAHOO.Blog.utils.getValueFromModuleList=function(refProperty,refValue,property){if(moduleList=="undefined")return false;for(var i=0,j=moduleList.length;i<j;i++){if(moduleList[i]&&moduleList[i][refProperty]==refValue){return moduleList[i][property];}}
return null;};YAHOO.Blog.utils.getOffsetPosition=function(ele){var curleft=ele.offsetLeft;var curtop=ele.offsetTop;for(var el=ele.offsetParent;el;el=el.offsetParent){var pos=YAHOO.util.Dom.getStyle(el,"position");if(pos=="relative"||pos=="absolute"){return[curleft,curtop];}else{curleft+=el.offsetLeft;curtop+=el.offsetTop;}}
return[curleft,curtop];};YAHOO.Blog.Shim=function(el){this.init(el);};YAHOO.Blog.Shim.prototype={init:function(el){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){if(el)this.el=el;this.ifr=document.createElement('iframe');this.ifr.src='javascript:false;';this.ifr.style.position='absolute';this.ifr.style.display='none';this.ifr.style.border='0';this.ifr.style.filter='alpha(opacity=0)';document.body.insertBefore(this.ifr,document.body.firstChild);}},expand:function(targetEl){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){if(!targetEl)var targetEl=this.el;this.ifr.style.left=YAHOO.util.Dom.getX(targetEl)-2+'px';this.ifr.style.top=YAHOO.util.Dom.getY(targetEl)-2+'px';this.ifr.style.width=targetEl.offsetWidth+'px';this.ifr.style.height=targetEl.offsetHeight+'px';this.ifr.style.zIndex=targetEl.currentStyle.zIndex-1+"";this.ifr.style.display='block';}},collapse:function(){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){this.ifr.style.display='none';}},shrink:function(){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){this.ifr.style.display='none';}}};YAHOO.util.Event.onAvailable('nav',function(){var loader=YAHOO.Blog.dialogueLoader;function panelClickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="span"){target=target.parentNode;}
var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var loadingIndicator=document.getElementById("loading-indicator");var cName=target.className;switch(cName){case"close":YAHOO.util.Event.stopEvent(e);loader.clear();break;case"save":if(target.tagName.toLowerCase()=="input"){YAHOO.util.Event.stopEvent(e);if(YAHOO.Blog.utils.validateColor(formEl)){loader.load({method:"POST",form:formEl,data:"act=save",isReload:true});if(loadingIndicator){loadingIndicator.style.visibility="visible";}}}
break;case"step-next":YAHOO.util.Event.stopEvent(e);loader.load({method:"POST",form:formEl,url:formEl.action,data:"act=next"});break;case"step-prev":YAHOO.util.Event.stopEvent(e);loader.load({method:"POST",form:formEl,url:formEl.preUrl.value,data:"act=prev"});break;case"ico-spectrum":var trNode=target.parentNode.parentNode;var ele=YAHOO.util.Dom.getFirstChild(loader.dialogueContainer);var inputField=YAHOO.util.Dom.getElementsByClassName("text","input",trNode)[0];var colorField=YAHOO.util.Dom.getElementsByClassName("picked-color","div",trNode)[0];YAHOO.widget.Slider.prototype.baselinePos=[];YAHOO.Blog.ColorPicker.show(e,{"el":ele,"trEl":trNode,"iFd":inputField,"cFd":colorField});break;}}
loader.clickHandler=panelClickHandler;var menuBar=new YAHOO.widget.MenuBar('nav',{hidedelay:70,minscrollheight:700,lazyload:true,autosubmenudisplay:true});menuBar.subscribe('click',function(type,args){var ev=args[0];var target=YAHOO.util.Event.getTarget(ev);if(target.nodeName=='A'){var subArray=menuBar.getSubmenus();for(var i=0;i<subArray.length;i++){subArray[i].hide();}}});loader.clickHandler=panelClickHandler;menuBar.render();var editModeItem=document.getElementById('menuitem-edit-mode-toggle');if(editModeItem&&editModeItem.href.search('login.yahoo.com')!=-1){return true;}else if(editModeItem==undefined){return true;}
var myblogBody=YAHOO.util.Dom.get("blog_myblog_index");function toggleEditMode(){if(YAHOO.Blog.isEditMode){YAHOO.Blog.isEditMode=false;YAHOO.util.DDM.lock();YAHOO.util.Dom.setStyle('drag_indication','display','none');YAHOO.util.Dom.removeClass(document.body,"edit-mode");}else{YAHOO.Blog.isEditMode=true;YAHOO.util.DDM.unlock();YAHOO.util.Dom.addClass(document.body,"edit-mode");}};if(editModeItem){YAHOO.util.Event.addListener(editModeItem,'click',function(e){if(myblogBody){YAHOO.util.Event.stopEvent(e);toggleEditMode();}});}
var layoutPanelItem=document.getElementById('menuitem-change-layout');if(layoutPanelItem){YAHOO.util.Event.addListener(layoutPanelItem,'click',function(e){if(myblogBody){YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({url:YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_LAYOUT_EDIT_PANEL});}});}
var themePanelItem=document.getElementById('menuitem-change-theme');if(themePanelItem){YAHOO.util.Event.addListener(themePanelItem,'click',function(e){if(myblogBody){YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({url:YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_THEME_EDIT_PANEL});}});}
var modulePanelItem=document.getElementById('menuitem-add-module');if(modulePanelItem){YAHOO.util.Event.addListener(modulePanelItem,'click',function(e){if(myblogBody){YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({url:YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_MODULE_ADD_PANEL});}});}
if(myblogBody&&(window.location.hash=="#edit=on")){window.location.hash='#';YAHOO.Blog.isEditMode=false;toggleEditMode();}else if(myblogBody&&(window.location.hash=="#panel=module")){window.location.hash='#';loader.load({url:YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_MODULE_ADD_PANEL});}else if(myblogBody&&(window.location.hash=="#panel=theme")){window.location.hash='#';loader.load({url:YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_THEME_EDIT_PANEL});}else if(myblogBody&&(window.location.hash=="#panel=layout")){window.location.hash='#';loader.load({url:YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_LAYOUT_EDIT_PANEL});}});})();(function(){if(!YAHOO.Blog.scriptFilter({ids:["category_selector"]})){return;}
function refreshList(type,o){var parent=o.parentSelect;var child=o.childSelect;if(o.parentValue!==undefined){for(var i=0;i<parent.options.length;i++){if(parent.options[i].value==o.parentValue){parent.options[i].selected=true;break;}}}
for(var i=child.options.length-1;i>=0;i--){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<8){child.options[i]=null;}else{child.remove(i);}}
var childArr=YAHOO.Blog.Config.Category.CHILDREN[parent.selectedIndex];for(var i=0;i<childArr.length;i++){var defSelected=false;if(o.childValue&&o.childValue==childArr[i].value){defSelected=true;}
if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<8){child.options[i]=new Option(childArr[i].text,childArr[i].value,defSelected);}else{child.add(new Option(childArr[i].text,childArr[i].value,defSelected),null);}
if(defSelected){child.options[child.options.length-1].selected=true;}}}
function emptyFolderSubmit(type,o){var manageForm=o.manageForm;var folderType=o.folderType;var folderId=o.folderId;var confirmMessage='';if(folderType=='post-draft'){confirmMessage=YAHOO.Blog.Config.Text.CONFIRM_EMPTY_POST_FOLDER_DRAFT;}else if(folderType=='post-trash'){confirmMessage=YAHOO.Blog.Config.Text.CONFIRM_EMPTY_POST_FOLDER_TRASH;}else if(folderType=='photo-draft'){confirmMessage=YAHOO.Blog.Config.Text.CONFIRM_EMPTY_PHOTO_FOLDER_DRAFT;}else if(folderType=='photo-trash'){confirmMessage=YAHOO.Blog.Config.Text.CONFIRM_EMPTY_PHOTO_FOLDER_TRASH;}
if(window.confirm(confirmMessage)){o.manageForm.sf.value=o.folderId;o.manageForm.act.value='c';o.manageForm.submit();return true;}else{return false;}}
function editFolderSubmit(e,o){var manageForm=o.manageForm;var pos=o.position;manageForm.rid.value=pos;manageForm.act.value='e';manageForm.submit();}
function cancelEditFolder(e,o){var pos=o.position;var folderNameDiv=document.getElementById('folder_'+pos);var folderNameLink=document.createElement('a');folderNameLink.href=o.folderUrl;folderNameLink.innerHTML=o.folderName;folderNameDiv.replaceChild(folderNameLink,YAHOO.util.Dom.getFirstChild(folderNameDiv));var categoryDiv=document.getElementById('category_'+pos);categoryDiv.innerHTML='<span id="mcat_'+pos+'">'+o.mainCatValue+'</span> &gt; <span id="scat_'+pos+'">'+o.subCatValue+'</span>';var editButtonDiv=document.getElementById('edit_'+pos);var editButton=document.createElement('button');editButton.className='ebtn';editButton.name='edit';editButton.value=YAHOO.Blog.Config.Text.BUTTON_EDIT;editButton.innerHTML=YAHOO.Blog.Config.Text.BUTTON_EDIT;YAHOO.util.Event.addListener(editButton,'click',editFolder,{'position':pos});editButtonDiv.replaceChild(editButton,YAHOO.util.Dom.getFirstChild(editButtonDiv));var cancelButtonDiv=document.getElementById('cancel_'+pos);cancelButtonDiv.parentNode.removeChild(cancelButtonDiv);}
function deleteFolderSubmit(e,o){var manageForm=o.manageForm;var folderType=o.folderType;var folderId=o.folderId;var confirmMessage='';if(folderType=='post'){confirmMessage=YAHOO.Blog.Config.Text.CONFIRM_DELETE_POST_FOLDER;}else if(folderType=='photo'){confirmMessage=YAHOO.Blog.Config.Text.CONFIRM_DELETE_PHOTO_FOLDER;}
if(window.confirm(confirmMessage)){manageForm.dfid.value=folderId;manageForm.act.value='d';manageForm.submit();return true;}else{return false;}}
function editFolder(e,o){var target=YAHOO.util.Event.getTarget(e);var folderUrl='';var mainCatValue='';var subCatValue='';var pos=o.position;var manageForm=document.getElementById('manage_folders_form');var folderNameDiv=document.getElementById('folder_'+pos);folderUrl=YAHOO.util.Dom.getFirstChild(folderNameDiv).href;var folderNameInput=document.createElement('input');folderNameInput.type='text';folderNameInput.name='folder_'+pos;folderNameInput.id='folder_'+pos;folderNameInput.value=YAHOO.util.Dom.getFirstChild(folderNameDiv).innerHTML;folderNameDiv.replaceChild(folderNameInput,YAHOO.util.Dom.getFirstChild(folderNameDiv));var categoryDiv=document.getElementById('category_'+pos);mainCatValue=document.getElementById('mcat_'+pos).innerHTML.replace('&amp;','&');subCatText=document.getElementById('scat_'+pos).innerHTML;subCatValue=document.getElementById('curr_cat_'+pos).value;var parentCatSelect=document.createElement('select');parentCatSelect.name='mainCat_'+pos;parentCatSelect.id='mainCat_'+pos;for(var i=0;i<YAHOO.Blog.Config.Category.PARENT.length;i++){if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<8){parentCatSelect.options[i]=new Option(YAHOO.Blog.Config.Category.PARENT[i].text,YAHOO.Blog.Config.Category.PARENT[i].text);}else{parentCatSelect.add(new Option(YAHOO.Blog.Config.Category.PARENT[i].text,YAHOO.Blog.Config.Category.PARENT[i].text),null);}}
var childCatSelect=document.createElement('select');childCatSelect.name='cat_'+pos;childCatSelect.id='cat_'+pos;categoryDiv.innerHTML='';categoryDiv.appendChild(parentCatSelect);categoryDiv.appendChild(childCatSelect);refreshList('load',{'parentSelect':parentCatSelect,'childSelect':childCatSelect,'parentValue':mainCatValue,'childValue':subCatValue});YAHOO.util.Event.addListener(parentCatSelect,'change',refreshList,{'parentSelect':parentCatSelect,'childSelect':childCatSelect});var saveButton=document.createElement('button');saveButton.name='save';saveButton.title=YAHOO.Blog.Config.Text.BUTTON_SAVE;saveButton.innerHTML=YAHOO.Blog.Config.Text.BUTTON_SAVE;YAHOO.util.Event.addListener(saveButton,'click',editFolderSubmit,{'manageForm':manageForm,'position':pos});target.parentNode.replaceChild(saveButton,target);var cancelButton=document.createElement('button');cancelButton.name='cancel';cancelButton.title=YAHOO.Blog.Config.Text.BUTTON_CANCEL;cancelButton.innerHTML=YAHOO.Blog.Config.Text.BUTTON_CANCEL;YAHOO.util.Event.addListener(cancelButton,'click',cancelEditFolder,{'folderName':folderNameInput.value,'folderUrl':folderUrl,'position':pos,'mainCatValue':mainCatValue,'subCatValue':subCatText});var cancelButtonSpan=document.createElement('span');cancelButtonSpan.id='cancel_'+pos;cancelButtonSpan.appendChild(cancelButton);document.getElementById('delete_'+pos).parentNode.insertBefore(cancelButtonSpan,document.getElementById('delete_'+pos));}
YAHOO.util.Event.onContentReady('category_selector',function(){var mainCategorySel=document.getElementById('mainCat');var categorySel=document.getElementById('cat');mainCategorySel.length=YAHOO.Blog.Config.Category.PARENT.length;for(var i=0;i<YAHOO.Blog.Config.Category.PARENT.length;i++){mainCategorySel.options[i]=new Option(YAHOO.Blog.Config.Category.PARENT[i].text,YAHOO.Blog.Config.Category.PARENT[i].value);}
mainCategorySel.options[0].selected=true;refreshList('load',{'parentSelect':mainCategorySel,'childSelect':categorySel});YAHOO.util.Event.addListener(mainCategorySel,'change',refreshList,{'parentSelect':mainCategorySel,'childSelect':categorySel});});YAHOO.util.Event.onContentReady('manage_folders_form',function(){if(document.getElementById('empty_post_draft_folder')){YAHOO.util.Event.addListener('empty_post_draft_folder','click',emptyFolderSubmit,{'manageForm':document.getElementById('manage_folders_form'),'folderType':'post-draft','folderId':'d'});}
if(document.getElementById('empty_post_trash_folder')){YAHOO.util.Event.addListener('empty_post_trash_folder','click',emptyFolderSubmit,{'manageForm':document.getElementById('manage_folders_form'),'folderType':'post-trash','folderId':'t'});}
if(document.getElementById('empty_photo_draft_folder')){YAHOO.util.Event.addListener('empty_photo_draft_folder','click',emptyFolderSubmit,{'manageForm':document.getElementById('manage_folders_form'),'folderType':'photo-draft','folderId':'d'});}
if(document.getElementById('empty_photo_trash_folder')){YAHOO.util.Event.addListener('empty_photo_trash_folder','click',emptyFolderSubmit,{'manageForm':document.getElementById('manage_folders_form'),'folderType':'photo-trash','folderId':'t'});}
var editButtonsArray=YAHOO.util.Dom.getElementsByClassName('ebtn','button');for(var i=0;i<editButtonsArray.length;i++){var parentId=editButtonsArray[i].parentNode.id;var pos=parentId.split('_')[1];YAHOO.util.Event.addListener(editButtonsArray[i],'click',editFolder,{'position':pos});}
var deleteButtonsArray=YAHOO.util.Dom.getElementsByClassName('delbtn','button');var folderType='post';if(document.getElementById('empty_photo_drafts_folder')){folderType='photo';}
for(var i=0;i<deleteButtonsArray.length;i++){var parentId=deleteButtonsArray[i].parentNode.id;var pos=parentId.split('_')[1];YAHOO.util.Event.addListener(deleteButtonsArray[i],'click',deleteFolderSubmit,{'manageForm':document.getElementById('manage_folders_form'),'folderType':folderType,'folderId':document.getElementById('fid_'+pos).value});}});})();(function(){YAHOO.Blog.XMLHttpRequest=function(config){this.init(config);};YAHOO.Blog.XMLHttpRequest.prototype={method:"GET",url:null,prevUrl:null,params:null,data:null,form:null,isUploadFile:false,htmlContainer:null,isStandardApi:true,isMultiThreaded:false,isReload:false,timeout:15000,retryTimes:0,customHandleSuccess:null,onComplete:null,customReturnCheck:null,callback:null,available:true,connectionObject:null,reset:function(){this.abort();this.method="GET";this.url=null;this.params=null;this.data=null;this.form=null;this.isUploadFile=false;this.htmlContainer=null;this.isStandardApi=true;this.isMultiThreaded=false;this.isReload=false;this.timeout=15000;this.retryTimes=0;this.customHandleSuccess=null;this.onComplete=null;this.customReturnCheck=null;},isObj:function(o){return(o&&(typeof o==="object"||typeof o==="function"))||false;},applyConfig:function(config,preventReset){if(!preventReset){this.reset();}
if(this.isObj(config)){for(var sKey in config){if(config.hasOwnProperty(sKey)){this[sKey]=config[sKey];}}}},init:function(config){this.applyConfig(config);this.callback={upload:this.handleSuccess,success:this.handleSuccess,failure:this.handleFailure,scope:this,timeout:this.timeout};},open:function(method,url){this.method=method;this.url=url;},send:function(data){if(this.isMultiThreaded||this.available){var url=this.url;this.available=false;if(data){this.data=data;}
if(this.form){if(this.url===null){if(typeof this.form==="string"){this.form=(document.getElementById(this.form)||document.forms[this.form]);}
url=("action"in this.form&&this.form.action!=="")?this.form.action:this.prevUrl;}
YAHOO.util.Connect.setForm(this.form,this.isUploadFile);}
this.prevUrl=url;var buf=[".crumb="+(("ajax_crumb"in window)?ajax_crumb:""),"reqTs="+(new Date()).valueOf()];if(this.isObj(this.params)){for(var k in this.params){if(this.params.hasOwnProperty(k)){buf.push(k+"="+encodeURIComponent(this.params[k]));}}}
url+=((url.indexOf("?")===-1)?"?":"&")+buf.join("&");this.callback.timeout=this.timeout;this.connectionObject=YAHOO.util.Connect.asyncRequest(this.method,url,this.callback,this.data);}},abort:function(){if(this.connectionObject){YAHOO.util.Connect.abort(this.connectionObject,this.callback);this.connectionObject=null;this.available=true;}},handleSuccess:function(o){this.available=true;this.retryTimes=0;if(this.customHandleSuccess){this.customHandleSuccess(o);return;}
var text,obj,type="error",value,extra='';if(o.responseText!==undefined){text=o.responseText.replace(/<!(?:--[\s\S]*?--\s*)?>\s*/g,'');if(YAHOO.lang&&YAHOO.lang.JSON){try{obj=YAHOO.lang.JSON.parse(text);}catch(e){obj={};}}else if(("JSON"in window)&&JSON.parse){try{obj=JSON.parse(text);}catch(e){obj={};}}else{obj=eval("("+text+")");}
if(this.isStandardApi&&obj.result){type=obj.result.type;value=obj.result.value;extra=(obj.result.extra)?obj.result.extra:'';switch(type){case"boolean":if(value&&this.isReload){window.location.reload();}
break;case"url":if(value.match(/^(\w+):\/\/([\w.]+)\/(\S*)$/)){window.location=value;}else{type="error";value=YAHOO.Blog.Config.Error.INVALID_URL;}
break;case"error":break;case"html":this.htmlContainer.innerHTML=value;break;case"data":break;default:type="error";value=YAHOO.Blog.Config.Error.INVALID_TYPE;break;}}else{if(this.isUploadFile){value=o.responseText;type="html";this.htmlContainer.innerHTML=value;this.isStandardApi=true;}else{value=YAHOO.Blog.Config.Error.INVALID_STRUCTURE;}}}else{value=YAHOO.Blog.Config.Error.NO_RESPONSETEXT;}
if(this.onComplete){if(this.isStandardApi){this.onComplete(type,value,extra);}else{this.onComplete(obj);}}},handleFailure:function(o){if(o.status===0){this.available=true;if(this.retryTimes>0){this.retryTimes-=1;this.send();}else if(this.onComplete){this.onComplete("error","Connect failure. Please retry!");}}}};})();(function(){YAHOO.Blog.dialogueLoader={overlay:null,mask:null,dialogueMask:null,dialogueContainer:null,clickHandler:null,isPopup:false,available:true,shim:null,xhrObj:null,init:function(){if(!document.getElementById("overlay")){var node=document.createElement("div");node.id="overlay";node.innerHTML='<div id="dialogue-mask"></div><div id="dialogue-container"></div><div id="mask"></div>';document.body.insertBefore(node,document.body.firstChild);}
this.xhrObj=new YAHOO.Blog.XMLHttpRequest();this.overlay=document.getElementById("overlay");this.mask=document.getElementById("mask");this.shim=new YAHOO.Blog.Shim(this.overlay);var dialogMask=this.dialogueMask=document.getElementById("dialogue-mask");if(YAHOO.env.ua.ie){dialogMask.shim=new YAHOO.Blog.Shim(dialogMask);}
this.dialogueContainer=document.getElementById("dialogue-container");this.dialogueContainer.innerHTML='<img src="'+YAHOO.Blog.Config.Img.PANEL_LOADING+'">';this.windowScrollEvent=new YAHOO.util.CustomEvent("windowScroll");YAHOO.util.Event.addListener(this.dialogueContainer,"click",this.clickHandler);},reset:function(){this.shim.collapse();this.clickHandler=null;this.isPopup=false;this.available=true;this.xhrObj.reset();},windowScrollHandler:function(e){if(YAHOO.env.ua.ie){if(!window.scrollEnd){window.scrollEnd=-1;}
clearTimeout(window.scrollEnd);window.scrollEnd=setTimeout(function(){YAHOO.Blog.dialogueLoader.windowScrollEvent.fire();},1);}else{YAHOO.Blog.dialogueLoader.windowScrollEvent.fire();}},center:function(){var viewPortHeight=YAHOO.util.Dom.getClientHeight();var elementHeight=this.dialogueContainer.offsetHeight;if(viewPortHeight>=elementHeight){var scrollY=document.documentElement.scrollTop||document.body.scrollTop;var y=(viewPortHeight/2)-(elementHeight/2)+scrollY;this.dialogueContainer.style.top=y+"px";}},hideFlash:function(){var els=document.getElementsByTagName("embed");for(var i=0,j=els.length;i<j;i++){els[i].style.visibility="hidden";}
if(YAHOO.env.ua.ie){var scope=document.getElementById("doc2")||document.getElementById("doc");if(scope){var arrIframe=scope.getElementsByTagName("iframe");for(var i=0,j=arrIframe.length;i<j;i++){if(arrIframe.className!=="rte_editor"){arrIframe[i].style.visibility="hidden";}}}}},showFlash:function(){var els=document.getElementsByTagName("embed");for(var i=0,j=els.length;i<j;i++){els[i].style.visibility="";}
if(YAHOO.env.ua.ie){var scope=document.getElementById("doc2")||document.getElementById("doc");if(scope){var arrIframe=scope.getElementsByTagName("iframe");for(var i=0,j=arrIframe.length;i<j;i++){if(arrIframe.className!=="rte_editor"){arrIframe[i].style.visibility="";}}}}},load:function(xhrObjCfg){if(this.available){this.available=false;var that=this;xhrObjCfg.htmlContainer=this.dialogueContainer;xhrObjCfg.onComplete=function(type,value,extra){if(type==="html"){var ele=function(){for(var el=that.dialogueContainer.firstChild;el;el=el.nextSibling){if(el.nodeType===1){return el;}}
return null;}();if(ele){YAHOO.util.Event.purgeElement(ele,true);}
var formEl=that.dialogueContainer.getElementsByTagName("form")[0];if(formEl){YAHOO.util.Event.on(formEl,"submit",function(e){YAHOO.util.Event.stopEvent(e);});}
if(YAHOO.Blog.dlgInitFns){var fns=YAHOO.Blog.dlgInitFns;for(var i=0,j=fns.length;i<j;i++){if(document.getElementById(fns[i].id)){fns[i].fn(extra);break;}}}
that.center();}else if(type==="error"){that.clear();alert(value);}else if(type==="boolean"){that.clear();}else if(type==="data"){var blogTitlePanel=document.getElementById("blog-edit-panel");if(blogTitlePanel){var WarningEl,textEl,ctnrEl=YAHOO.util.Dom.getElementsByClassName("ctnr","div",blogTitlePanel)[0],divs=ctnrEl.getElementsByTagName("div");for(var i=0;i<divs.length;i+=1){if(divs[i].id==="warning"){divs[i].parentNode.removeChild(divs[i]);i-=1;}}
function insertAfter(newNode,referenceNode){if(referenceNode.nextSibling){return referenceNode.parentNode.insertBefore(newNode,referenceNode.nextSibling);}else{return referenceNode.parentNode.appendChild(newNode);}}
function createWarningEl(content){var warningEl=document.createElement("div");warningEl.id="warning";warningEl.innerHTML=content;return warningEl;}
if(value["description"]){var WarningEl=createWarningEl(value["description"]);var textEl=document.getElementById("description");if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<8){var textAreas=document.getElementsByTagName('textarea');for(var i=0;i<textAreas.length;i++){if(textAreas[i].getAttribute('id')=='description'){textEl=textAreas[i];break;}}}
insertAfter(WarningEl,textEl);}
if(value["title"]){var WarningEl=createWarningEl(value["title"]);var textEl=document.getElementById("title");insertAfter(WarningEl,textEl);}
if(value["crumb"]){var WarningEl=createWarningEl(value["crumb"]);ctnrEl.insertBefore(WarningEl,ctnrEl.firstChild);}
if(value["SYSTEM_ERROR"]){var WarningEl=createWarningEl(value["SYSTEM_ERROR"]);ctnrEl.insertBefore(WarningEl,ctnrEl.firstChild);}}}
var loadingIndicator=document.getElementById("loading-indicator");if(loadingIndicator){loadingIndicator.style.visibility="";}
that.available=true;};this.xhrObj.applyConfig(xhrObjCfg);this.xhrObj.send();if(!this.isPopup){this.dialogueContainer.innerHTML='<img src="'+YAHOO.Blog.Config.Img.PANEL_LOADING+'">';var height=YAHOO.util.Dom.getDocumentHeight();if(YAHOO.env.ua.ie){this.mask.style.height=this.dialogueMask.style.height=height+"px";}
this.overlay.style.height=height+"px";this.overlay.style.display="block";this.shim.expand();this.center();this.hideFlash();YAHOO.util.Event.addListener(this.dialogueContainer,"click",this.clickHandler);this.isPopup=true;}}},clear:function(){YAHOO.util.Event.removeListener(this.dialogueContainer,"click",this.clickHandler);this.overlay.style.display="none";this.showFlash();YAHOO.util.Event.removeListener(window,"scroll",YAHOO.Blog.dialogueLoader.windowScrollHandler);this.reset();}};YAHOO.Blog.dialogueLoader.init();YAHOO.Blog.dlgInitFns=function(){var loader=YAHOO.Blog.dialogueLoader;var YUD=YAHOO.util.Dom;var YUE=YAHOO.util.Event;function initColorFields(){var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var inputFields=YUD.getElementsByClassName("text","input",formEl);var colorFields=YUD.getElementsByClassName("picked-color","div",formEl);for(var i=0,j=inputFields.length;i<j;i++){if(inputFields[i].value!==""){if(inputFields[i].value.match(/^#[0-9a-fA-F]{3}$|^#[0-9a-fA-F]{6}$/i)){colorFields[i].style.backgroundColor=inputFields[i].value;}else{var trEl=inputFields[i].parentNode.parentNode;trEl.className="err";}}}
function changeColor(){var trEl=this.parentNode.parentNode;var colorField=YUD.getElementsByClassName("picked-color","div",trEl)[0];if(colorField){if(this.value.match(/^#[0-9a-fA-F]{3}$|^#[0-9a-fA-F]{6}$/i)){colorField.style.backgroundColor=this.value;trEl.className="";}else if(this.value===""){colorField.style.backgroundColor="";trEl.className="";}else{colorField.style.backgroundColor="";trEl.className="err";}}}
YUE.on(inputFields,"keyup",changeColor);YUE.on(inputFields,"blur",changeColor);}
return[{id:"theme-step-1",fn:function(){var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var url1=formEl.action;var url2=formEl.advUrl.value;var themeSelect=formEl.themeSelect;if(themeSelect[0].checked)formEl.action=url1;else if(themeSelect[1].checked)formEl.action=url2;function clickHandler(e){document.getElementById("step-next").className="step-next";if(this.value=="theme"){formEl.action=url1;}else{formEl.action=url2;}}
YUE.on(themeSelect,"click",clickHandler);YUE.onContentReady("theme-step-1",function(){if(typeof rt_Done==='function'){rt_Done(true);}},this);}},{id:"theme-step-2",fn:function(){function clickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="a"){YAHOO.util.Event.stopEvent(e);loader.load({url:target.href+"&themeSelect="+document.mainFrm.themeSelect.value});}};YUE.on(document.getElementById("theme-step-2"),"click",clickHandler);YUE.on(document.mainFrm.themeId,"click",function(){document.getElementById("step-next").className="step-next";});YAHOO.util.Event.addListener('theme-category-menu',"change",function(e){var dd=YAHOO.util.Event.getTarget(e);var selected=dd.options[dd.selectedIndex];var catUrl=YAHOO.Blog.Config.Url.BLOG+selected.value;loader.load({url:catUrl});});}},{id:"theme-step-3",fn:function(){initColorFields();YUE.on(document.getElementById("gallerySelect"),"change",function(){var folder=this.value;if(folder!==""){var crumb=document.getElementById('crumb').value;YAHOO.Blog.utils.openwin(YAHOO.Blog.Config.Url.BLOG+'/api/fe/photo_choose?folder='+folder+'&.crumb='+crumb,'prf_photo','800','500','front');}});YUE.on(document.getElementById("pagePreview"),"click",function(e){YUE.stopEvent(e);var url=this.href;if(url!==""){var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var ajaxUrl=formEl.action;var xhrObj=new YAHOO.Blog.XMLHttpRequest({method:"POST",form:formEl});xhrObj.onComplete=function(type,value){if(type==="boolean"){window.open(url,"pagePreview","top=0,left=0,width=1024,height=768,status=no,resizable=yes,location=no,menubar=no,toolbar=no,scrollbars=yes");}};xhrObj.send("isPreview=1&act=save");}});}},{id:"add-module-panel-step1",fn:function(){var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var defaultUrl=formEl.action;var btnNext=document.getElementById("step-next");function changeHandler(e){var target=YUE.getTarget(e);if(target.name==="moduleId"){if(btnNext.className!=="step-next"){btnNext.className="step-next";}}}
YUE.on("step-1","click",changeHandler);YUE.onContentReady("add-module-panel-step1",function(){if(typeof rt_Done==='function'){rt_Done(true);}},this);}},{id:"add-module-panel-step2",fn:function(){var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var defaultUrl=formEl.action;var btnSave=document.getElementById("step-save");function changeHandler(e){var target=YUE.getTarget(e);if(target.name==="position"){if(btnSave.className!=="save"){btnSave.className="save";}}}
YUE.on("step-2","click",changeHandler);}},{id:"blog-edit-panel",fn:function(){initColorFields();YUE.on(document.getElementById("gallerySelect"),"change",function(){var folder=this.value;if(folder!==""){var crumb=document.getElementById('crumb').value;YAHOO.Blog.utils.openwin(YAHOO.Blog.Config.Url.BLOG+'/api/fe/photo_choose?folder='+folder+'&.crumb='+crumb,'prf_photo','800','500','front');}});var node=YUD.getElementsByClassName("background","li","blog-edit-panel")[0];var trEls=node.getElementsByTagName("tr");function clickHandler(){document.getElementById("bg-"+(this.i+1)).checked=true;}
for(var i=0;i<trEls.length;i++){trEls[i].i=i;YUE.on(trEls[i],"click",clickHandler);}}},{id:"mod-alist-edit",fn:function(){initColorFields();var slider;var newVal=0;var inputEl=document.mainFrm.transparency;function sliderInit(){YAHOO.widget.Slider.prototype.baselinePos=[];slider=YAHOO.widget.Slider.getHorizSlider("horizWrapper","horizHandleDiv",100,0,1);slider.thumb.onAvailable=function(){slider.setStartSliderState();slider.setValue(inputEl.value-100);};slider.subscribe("change",displayNewValue);}
function displayNewValue(offsetFromStart){newVal=(offsetFromStart+100);var el=document.getElementById('divTestAlpha');YUD.setStyle(el,"opacity",newVal/100);inputEl.value=newVal;}
sliderInit();}},{id:"edit-panel-bookmark",fn:function(){var btnClose=document.getElementById("style-dlg-close");var objPop=document.getElementById("style-dlg");var objs=document.getElementById("style").getElementsByTagName("a");var closePop=function(){objPop.style.visibility="hidden";}
function show_style(){function showstyle(style){objPop.style.visibility="visible";document.getElementById("style-dlg-box").className=style;}
for(var i=0,j=objs.length;i<j;i++){objs[i].i=i+1;showstyle('style-'+this.i);}}
YUE.addListener(objs,'click',show_style);YUE.addListener(btnClose,'click',closePop);}},{id:"subscptcat",fn:function(){var tableEl=YUD.getElementsByClassName("swap-row","table","subscptcat")[0];var newFolder=YUD.getElementsByClassName("new-folder","div","subscptcat")[0];var eTable=new YAHOO.Blog.EditableTable(tableEl);eTable.newRowEditor.style.display="none";newFolder.appendChild(eTable.newRowEditor);var btnAddRow=newFolder.getElementsByTagName("a")[0];YUE.on(btnAddRow,'click',function(e){YUE.stopEvent(e);if(eTable.animating){return;}
if(eTable.newRowEditor.style.display==="none"){eTable.newRowEditor.style.display="block";}else{eTable.newRowEditor.style.display="none";}});}},{id:"newsubspt",fn:function(extra){var cfg=extra;var f=function(){var u=YAHOO.namespace("Updates");if(!u.DiscConfig){u.DiscConfig=[];}
u.DiscConfig[0]=cfg;};if((typeof(YAHOO)!=="undefined")&&YAHOO.namespace){f();YAHOO.Updates.Disclosure.manager.initRenderedInstance(cfg);}else{YAHOO.Updates.Disclosure.manager.initRenderedInstance(cfg);}}},{id:"blog-relationship-popup",fn:function(extra){if(!extra)
return;var cfg=extra;var f=function(){var u=YAHOO.namespace("Updates");if(!u.DiscConfig){u.DiscConfig=[];}
u.DiscConfig[0]=cfg;};if((typeof(YAHOO)!=="undefined")&&YAHOO.namespace){f();YAHOO.Updates.Disclosure.manager.initRenderedInstance(cfg);}else{YAHOO.Updates.Disclosure.manager.initRenderedInstance(cfg);}}}];}();})();function privacySelected(privateId,familyId,friendId){privateObj=document.getElementById(privateId);familyObj=document.getElementById(familyId);friendObj=document.getElementById(friendId);if(privateObj.checked){familyObj.disabled=false;friendObj.disabled=false;}else{familyObj.checked=false;friendObj.checked=false;familyObj.disabled=true;friendObj.disabled=true;}}
(function(){if(!YAHOO.Blog.scriptFilter({ids:["comments-listing","trackback-listing","myblog-clist-side-bar","guestbook-listing","photo_comment_list"]})){return;}
YAHOO.Blog.articleInit=function(){var rteArr={};var resizeIframe=function(){if(window!==window.parent&&iframeId!==null){var height;if(false){height=(document.documentElement.clientWidth===0)?document.body.scrollHeight:document.documentElement.scrollHeight;}else{height=document.documentElement.offsetHeight;}
parent.document.getElementById(iframeId).height=height;}};var xhrObj=new YAHOO.Blog.XMLHttpRequest();var handleComplete=function(type,value){if(type==="html"){resizeIframe();}else if(type==="error"){alert(value);}};var clickHandler=function(e){var target=YAHOO.util.Event.getTarget(e);var matches=target.id.match(/reply_(\w+)_(\d+)/);if(matches){var commentId=matches[2];var action=matches[1];if(action=='editor'&&'post_'+matches[0]+'_button'==target.id){action='submit';}
switch(action){case"init":YAHOO.util.Event.stopEvent(e);var container=document.getElementById("reply_container_"+commentId);if(container.style.display=="none"){container.style.display="block";if(!document.getElementById('rte_reply_editor_'+commentId+'_editor')){YAHOO.util.Dom.setStyle('rte_reply_editor_'+commentId+'_value','display','none');rteArr["rte_reply_editor_"+commentId]=new YAHOO.widget.RTE("rte_reply_editor_"+commentId,"reply_form_"+commentId,"reply_editor_"+commentId,"hgs|fv|biu|tc|pl|OI");rteArr["rte_reply_editor_"+commentId].render();YAHOO.util.Event.addListener('reply_editor_'+commentId+'_edit_html','click',function(e,o){o.toggleEditor();},rteArr["rte_reply_editor_"+commentId]);}}else{container.style.display="none";}
break;case"submit":var el=YAHOO.util.Selector.query('#reply_container_'+commentId+' input.disc-checkbox-class');if(el&&el[0]&&el[0].checked){document.getElementById('reply_disc_100_0').value='1';}else{document.getElementById('reply_disc_100_0').value='0';}
var el=YAHOO.util.Selector.query('#reply_container_'+commentId+' input.disc-inline-perm-class');if(el&&el[0]){document.getElementById('reply_disc_inline_perm_input_0').value=el[0].value;}else{document.getElementById('reply_disc_inline_perm_input_0').value='PUB';}
document.getElementById('form_article_comments_act').value='reply_comment';document.getElementById('form_comment_id').value=commentId;document.getElementById('form_extendflag').value='on';rteArr["rte_reply_editor_"+commentId].submitContent();break;case"reset":YAHOO.util.Event.stopEvent(e);var container=document.getElementById("reply_container_"+commentId);container.style.display="none";break;case"toggle":rteArr["rteArticle"+commentId].toggleEditor();break;}}else{var cName=target.className;switch(cName){case"btn_pre_comment":YAHOO.util.Event.stopEvent(e);xhrObj.applyConfig({method:"POST",form:"comment_form",htmlContainer:document.getElementById("comment_container")});xhrObj.onComplete=handleComplete;xhrObj.send("nav=pre");break;case"btn_next_comment":YAHOO.util.Event.stopEvent(e);xhrObj.applyConfig({method:"POST",form:"comment_form",htmlContainer:document.getElementById("comment_container")});xhrObj.onComplete=handleComplete;xhrObj.send("nav=next");break;case"btn_pre_trackback":YAHOO.util.Event.stopEvent(e);xhrObj.applyConfig({method:"POST",form:"trackback_form",htmlContainer:document.getElementById("trackback_container")});xhrObj.onComplete=handleComplete;xhrObj.send("nav=pre");break;case"btn_next_trackback":YAHOO.util.Event.stopEvent(e);xhrObj.applyConfig({method:"POST",form:"trackback_form",htmlContainer:document.getElementById("trackback_container")});xhrObj.onComplete=handleComplete;xhrObj.send("nav=next");break;case"btn_expand_comment":YAHOO.util.Event.stopEvent(e);var container=target.parentNode.parentNode;if(YAHOO.util.Dom.hasClass(container,'expanded')){YAHOO.util.Dom.replaceClass(container,'expanded','collapsed');target.title=YAHOO.Blog.Config.Text.EXPAND;}else{YAHOO.util.Dom.replaceClass(container,'collapsed','expanded');target.title=YAHOO.Blog.Config.Text.COLLAPSE;if(true){var scope=document.getElementById("comment_container");if(scope){var arrIframe=scope.getElementsByTagName("iframe");for(var i=0,j=arrIframe.length;i<j;i++){if(arrIframe.className!=="rte_editor"){arrIframe[i].src=arrIframe[i].src;}}}}}
break;case"btn_expand_trackback":YAHOO.util.Event.stopEvent(e);var container=target.parentNode.parentNode;if(YAHOO.util.Dom.hasClass(container,'expanded')){YAHOO.util.Dom.replaceClass(container,'expanded','collapsed');target.title=YAHOO.Blog.Config.Text.EXPAND;}else{YAHOO.util.Dom.replaceClass(container,'collapsed','expanded');target.title=YAHOO.Blog.Config.Text.COLLAPSE;}
break;case"btn_create_account":YAHOO.util.Event.stopEvent(e);xhrObj.applyConfig({method:"POST",form:target.form,url:target.form.reg_url.value});xhrObj.onComplete=function(type,value){if(type==="boolean"){document.getElementById("comment_rte_container").style.display="block";document.getElementById("create_account").style.display="none";resizeIframe();}else if(type==="error"){alert(value);}};xhrObj.send("rgt=1");break;}}
resizeIframe();};var getOffsetPos=function(ele){var curleft=ele.offsetLeft;var curtop=ele.offsetTop;for(var el=ele.offsetParent;el;el=el.offsetParent){var pos=YAHOO.util.Dom.getStyle(el,"position");if(pos=="relative"||pos=="absolute"){return[curleft,curtop];}else{curleft+=el.offsetLeft;curtop+=el.offsetTop;}}
return[curleft,curtop];};var overHandler=function(e){var target=YAHOO.util.Event.getTarget(e);if(target.className==="title"){var dropList=YAHOO.util.Dom.getElementsByClassName("action","div",target.parentNode.parentNode.parentNode)[0];if(dropList){var xy=getOffsetPos(target);YAHOO.util.Dom.setStyle(dropList,'display','block');YAHOO.util.Dom.setStyle(dropList,'left',xy[0]+'px');var newy=xy[1]+target.offsetHeight-2;YAHOO.util.Dom.setStyle(dropList,'top',newy+'px');}}};var outHandler=function(e){var target=YAHOO.util.Event.getTarget(e);var cName=target.className;var regExKeepDiv=/title|action|addtofriends|date|addtoblacklist/;switch(cName){case"title":var related=YAHOO.util.Event.getRelatedTarget(e);if(related&&!related.className.match(regExKeepDiv)){var dropList=YAHOO.util.Dom.getElementsByClassName("action","div",target.parentNode.parentNode.parentNode)[0];if(dropList){dropList.style.display="none";}}
break;case"action":var related=YAHOO.util.Event.getRelatedTarget(e);if(!YAHOO.util.Dom.isAncestor(target,related)){target.style.display="none";}
break;case"addtofriends":case"addtoblacklist":var related=YAHOO.util.Event.getRelatedTarget(e);if(related){if(!related.className.match(regExKeepDiv)){target.parentNode.style.display="none";}}else{target.parentNode.style.display="none";}
break;}};var articleList=document.getElementById("comments-listing");if(articleList){YAHOO.util.Event.addListener(articleList,'click',clickHandler);YAHOO.util.Event.on(articleList,'mouseover',overHandler);YAHOO.util.Event.on(articleList,'mouseout',outHandler);}
var photoCommentList=document.getElementById("photo_comment_list");if(photoCommentList){YAHOO.util.Event.addListener(photoCommentList,'click',clickHandler);YAHOO.util.Event.on(photoCommentList,'mouseover',overHandler);YAHOO.util.Event.on(photoCommentList,'mouseout',outHandler);}
var gbookList=document.getElementById("guestbook-listing");if(gbookList){YAHOO.util.Event.addListener(gbookList,'click',clickHandler);YAHOO.util.Event.on(gbookList,'mouseover',overHandler);YAHOO.util.Event.on(gbookList,'mouseout',outHandler);}
var trackbackList=document.getElementById("trackback-listing");trackbackList&&YAHOO.util.Event.addListener(trackbackList,'click',clickHandler);var sideBar=document.getElementById("myblog-clist-side-bar");var checkResize=function(){if(window!==window.parent){iframeId=document.getElementById("ctnrCommentList")?"ctnrCommentList":(document.getElementById("barCommentList")?"barCommentList":null);if(iframeId){resizeIframe();YAHOO.util.Event.on(window,"load",resizeIframe);if(iframeId==="barCommentList"){var liArr=sideBar.getElementsByTagName("li");if(location.search.search(/[?&]page=\d+/)===-1)liArr[0].className="on";var index=0;for(var i=0,j=liArr.length;i<j;i++){liArr[i].i=i;}}}}}
YAHOO.util.Event.addListener(window,"load",setTimeout(checkResize,1));var sideBarClickHandler=function(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="a")var cName=target.className;switch(cName){case"article-link":var liEl=target.parentNode.parentNode;if(liEl.className=="on"){YAHOO.util.Event.stopEvent(e);}else{liArr[index].className="";liEl.className="on";index=liEl.i;}
break;}};sideBar&&YAHOO.util.Event.addListener(sideBar,'click',sideBarClickHandler);}();})();YAHOO.Blog.friendsInit=function(){var scopeIds=["friend-list","profile_highlight_module","comment_container","comment_listing","guestbook-listing","myblog-tag-frd-article","myblog-clist-full","myblog-clist-side-bar","photo_comment","gb_msg","who_tagged_me","photo_comment_list"];if(!YAHOO.Blog.scriptFilter({ids:scopeIds})){return;}
var loader=YAHOO.Blog.dialogueLoader;if(window!==window.parent){loader=parent.YAHOO.Blog.dialogueLoader;}
function panelClickHandler(e){var target=YAHOO.util.Event.getTarget(e);var cName=target.className;switch(cName){case"addtoblacklist":YAHOO.util.Event.stopEvent(e);loader.load({method:"GET",url:target.href});break;case"btn_save":YAHOO.util.Event.stopEvent(e);loader.load({method:"POST",form:target.form});break;case"btn_close":loader.clear();break;}}
function clickHandler(e,isReload){var target=YAHOO.util.Event.getTarget(e);if(target.tagName!=='A'){target=YAHOO.util.Dom.getAncestorByTagName(target,'A');}
if(!target){return true;}
var cName=target.className;if(cName.match(/ /)){cName=cName.split(' ')[0];}
switch(cName){case"addtoblacklist":case"addtofriends":case"modify":case"del":YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({method:"GET",url:target.href,isReload:isReload});break;}}
for(var scope,i=0;i<scopeIds.length;i++){scope=document.getElementById(scopeIds[i]);if(scope){var isReload=false;if(i<2){isReload=true;}
YAHOO.util.Event.addListener(scope,'click',clickHandler,isReload);}}}();(function(){var oConditions={ids:["profile_highlight_module","subscription-sidebar"]};if(!YAHOO.Blog.scriptFilter(oConditions)){return;}
var loader=YAHOO.Blog.dialogueLoader;var addSubscription=function(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName!=='A'){target=YAHOO.util.Dom.getAncestorByTagName(target,'A');}
var cName=target.className;if(cName.match(/ /)){cName=cName.split(' ')[0];}
switch(cName){case"add_subscription":YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({url:target.href});break;}};var scopeIds=["profile_highlight_module"];for(var scope,i=0;i<scopeIds.length;i+=1){scope=document.getElementById(scopeIds[i]);if(scope){YAHOO.util.Event.on(scope,'click',addSubscription);}}
if(document.getElementById("subscription-index")===null&&document.getElementById("subscription-detail")===null){return;}
function panelClickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()==="span"){target=target.parentNode;}
var cName=target.className;switch(cName){case"btn_save":YAHOO.util.Event.stopEvent(e);var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];loader.load({method:"POST",form:formEl,url:formEl.action,data:"act=save",isReload:true});break;case"btn_close":YAHOO.util.Event.stopEvent(e);loader.clear();break;}}
function updateCurrentHighlight(){var subsDetail=document.getElementById("subscription-detail");if(subsDetail){currentHighlight=YAHOO.util.Dom.getElementsByClassName("on","li",subsDetail)[0];}else{currentHighlight=null;}};function clickHandler(e){var target=YAHOO.util.Event.getTarget(e),lastClick=null,cName;if(target.tagName.toLowerCase()==="a"){cName=target.className;}
switch(cName){case"article-link":var liEl=function(){for(var el=target.parentNode;el;el=el.parentNode){if(el.tagName.toLowerCase()==="li"){return el;}}
return null;}();if(liEl.className==="on"){}else{YAHOO.util.Event.stopEvent(e);if(!currentHighlight){updateCurrentHighlight();}
if(currentHighlight){currentHighlight.className="";}
liEl.className="on";currentHighlight=liEl;}
break;case"edit":case"delete":YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({url:target.href});break;}};var sideBar=document.getElementById("subscription-sidebar");var lastClick=function(){var folderUl=sideBar.getElementsByTagName("ul")[0];var folderLi=folderUl.childNodes;var el,blog;for(var i=0,j=folderLi.length;i<j;i++){if(folderLi[i].nodeType===1&&YAHOO.util.Dom.hasClass(folderLi[i],"on")){el=folderLi[i];blog=YAHOO.util.Dom.getElementsByClassName("on","li",el)[0];break;}}
return{"folder":el,"blog":blog};}();function sideBarClickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()==="img"){target=target.parentNode;}
var cName=target.className;switch(cName){case"folder-link":YAHOO.util.Event.stopEvent(e);var liEl=target.parentNode.parentNode;if(liEl.className==="on"){liEl.className="";lastClick["folder"]=null;}else{if(lastClick["folder"]){lastClick["folder"].className="";}
liEl.className="on";lastClick["folder"]=liEl;var ulEl=liEl.getElementsByTagName("ul")[0];if(ulEl.innerHTML===""){var link=target.href.split(';')[1];xhrObj.applyConfig({htmlContainer:ulEl,url:link});xhrObj.send();}}
break;case"blog-link":YAHOO.util.Event.stopEvent(e);var liEl=target.parentNode;if(liEl.className===""){if(lastClick["blog"]){lastClick["blog"].className="";}
liEl.className="on";lastClick["blog"]=liEl;var containerArr=YAHOO.util.Dom.getElementsByClassName('yui-g','div',document.getElementById("col-main"));var container=containerArr[0];xhrObj.applyConfig({htmlContainer:container,url:target.href});if(YAHOO.env.ua.ie&&YAHOO.env.ua.ie<7){xhrObj.onComplete=function(){var onMouseOver=function(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName!=='LI'){target=YAHOO.util.Dom.getAncestorByTagName(target,'LI');}
YAHOO.util.Dom.addClass(target,'hover');};var onMouseOut=function(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName!=='LI'){target=YAHOO.util.Dom.getAncestorByTagName(target,'LI');}
YAHOO.util.Dom.removeClass(target,'hover');}
var articleLists=YAHOO.util.Dom.getElementsByClassName('','li','article-links');for(var i=0;i<articleLists.length;i++){YAHOO.util.Event.on(articleLists[i],'mouseover',onMouseOver);YAHOO.util.Event.on(articleLists[i],'mouseout',onMouseOut);}};}
xhrObj.send();currentHighlight=null;}
break;case"add_subscription":case"subs_setting":YAHOO.util.Event.stopEvent(e);loader.clickHandler=panelClickHandler;loader.load({url:target.href});break;case"next":case"prev":YAHOO.util.Event.stopEvent(e);target.className+=" off";var ulEl=target;while(ulEl.nodeName!=="UL"){ulEl=ulEl.parentNode;}
if(typeof ulEl.pagination==="undefined"){ulEl.pagination=1;}
(cName==="next")?ulEl.pagination++:ulEl.pagination--;var liEl=ulEl.parentNode;var linkEl=liEl.getElementsByTagName("a")[0];xhrObj.applyConfig({url:linkEl.href,htmlContainer:ulEl,params:{page:ulEl.pagination}});xhrObj.target=target;xhrObj.send();break;}};sideBar&&YAHOO.util.Event.addListener(sideBar,'click',sideBarClickHandler);var currentHighlight;var subsDetail=document.getElementById("yui-main");subsDetail&&YAHOO.util.Event.addListener(subsDetail,'click',clickHandler);var xhrObj=new YAHOO.Blog.XMLHttpRequest();xhrObj.onComplete=function(type,value){var ulEl;if(type==="error"){if(this.target!==null){ulEl=this.target.parentNode.parentNode;if(this.target.className==="next off"){ulEl.pagination--;this.target.className==="next";}else if(this.target.className==="prev off"){ulEl.pagination++;this.target.className==="prev";}
this.target=null;}}};var paramStr=window.location.hash;if(paramStr.match(/#operation=add/)){window.location.hash="#";var editLink=YAHOO.util.Dom.getElementsByClassName("add_subscription","a",sideBar)[0];loader.clickHandler=panelClickHandler;loader.load({url:editLink.href});}})();(function(){if(!YAHOO.Blog.scriptFilter({ids:["subscription-sidebar"]})){return;}
YAHOO.Blog.EditableTable=function(tableEl){this.init(tableEl);}
YAHOO.Blog.EditableTable.prototype={animating:false,tableEl:null,currentItemNode:null,currentId:null,currentEditableFields:[],editableFieldEditors:[],newRowEditor:null,rowTemplate:null,rowContainer:null,rowCount:0,formEl:null,editXhrUrl:"",swapXhrUrl:"",delXhrUrl:"",addXhrUrl:"",actionUrl:"",idKeyName:"",xhrSuccess:null,xhrFailure:null,xhrAvailable:true,init:function(tableEl){this.xhrObj=new YAHOO.Blog.XMLHttpRequest();this.tableEl=YAHOO.util.Dom.get(tableEl);if(!this.tableEl){throw new Error("Init failed!");}
this.formEl=this.tableEl.getElementsByTagName("form")[0];this.actionUrl=this.formEl.action;this.idKeyName=this.formEl.idKeyName.value;this.editXhrUrl=this.formEl.editXhrUrl?this.formEl.editXhrUrl.value:this.actionUrl;this.swapXhrUrl=this.formEl.swapXhrUrl?this.formEl.swapXhrUrl.value:this.actionUrl;this.delXhrUrl=this.formEl.delXhrUrl?this.formEl.delXhrUrl.value:this.actionUrl;this.addXhrUrl=this.formEl.delXhrUrl?this.formEl.addXhrUrl.value:this.actionUrl;this.editableFieldEditors=YAHOO.util.Dom.getElementsByClassName("editable_field_editor","div",this.tableEl);this.rowCount=YAHOO.util.Dom.getElementsByClassName("row","div",this.tableEl).length;this.newRowEditor=YAHOO.util.Dom.getElementsByClassName("new_row_editor","div",this.tableEl)[0];this.rowTemplate=YAHOO.util.Dom.getElementsByClassName("row_templet","div",this.tableEl)[0];this.rowContainer=YAHOO.util.Dom.getElementsByClassName("row-container","td",this.tableEl)[0];YAHOO.util.Event.addListener(this.tableEl,'click',this.clickHandler,this,true);YAHOO.util.Event.addListener(this.editableFieldEditors,"click",this.editorClickHandler,this,true);YAHOO.util.Event.addListener(this.newRowEditor,"click",this.editorClickHandler,this,true);this.xhrObj.form=YAHOO.util.Dom.get('mainFrm');},editorClickHandler:function(e){var target=YAHOO.util.Event.getTarget(e);var cName=target.className;switch(cName){case"btn_field_save":this.saveEdit(target);break;case"btn_field_cancel":this.cancelEdit();break;case"btn_row_add":if(!this.animating){this.addRow(target);}
break;case"btn_row_cancel":this.newRowEditor.style.display="none";var valueField=YAHOO.util.Dom.getElementsByClassName("editable_fieldvalue","input",this.newRowEditor)[0];valueField.value="";break;}},clickHandler:function(e){if(this.animating){YAHOO.util.Event.stopEvent(e);return;}
var target=YAHOO.util.Event.getTarget(e);var matches=target.className.match(/btn_(\w+)/);function getItemNode(node){for(var el=node.parentNode;el;el=el.parentNode){if(el.tagName.toLowerCase()==="table")return el;}
return null;}
if(matches){this.currentItemNode=getItemNode(target);this.currentId=YAHOO.util.Dom.getElementsByClassName("id","input",this.currentItemNode)[0].value;switch(matches[1]){case"up":YAHOO.util.Event.stopEvent(e);this.handleMove(-1);break;case"dwn":YAHOO.util.Event.stopEvent(e);this.handleMove(1);break;case"edt":YAHOO.util.Event.stopEvent(e);this.handleEdit();break;case"del":YAHOO.util.Event.stopEvent(e);this.handleDelete();break;}}},handleMove:function(direction){var prop=(direction===1)?"nextSibling":"previousSibling";function getTargetNode(node,direction){for(var el=node.parentNode[prop];el;el=el[prop]){if(el.nodeType===1&&YAHOO.util.Dom.hasClass(el,"row"))return el.getElementsByTagName("table")[0];}
return null;}
targetNode=getTargetNode(this.currentItemNode,direction);targetId=YAHOO.util.Dom.getElementsByClassName("id","input",targetNode)[0].value;var node1=this.currentItemNode;var node2=targetNode;var region1=YAHOO.util.Dom.getRegion(node1);var region2=YAHOO.util.Dom.getRegion(node2);var oldNode1XY=YAHOO.util.Dom.getXY(node1);var oldNode2XY=YAHOO.util.Dom.getXY(node2);var that=this;var swapFunc=function(){if(anim2.isAnimated()){setTimeout(swapFunc,100);return;}
node1.style.top=node2.style.top="";node1.style.position=node2.style.position="";var parentNode=node2.parentNode;var nextNode=node2.nextSibling;node1.parentNode.insertBefore(node2,node1);if(nextNode){parentNode.insertBefore(node1,nextNode);}else{parentNode.appendChild(node1);}
that.animating=false;};this.animating=true;var heightDiff=(region2.bottom-region2.top)-(region1.bottom-region1.top);var anim1=new YAHOO.util.Motion(node1,{points:{to:[oldNode2XY[0],oldNode2XY[1]+heightDiff]}},0.2,YAHOO.util.Easing.easeInStrong);var anim2=new YAHOO.util.Motion(node2,{points:{to:oldNode1XY}},0.2,YAHOO.util.Easing.easeInStrong);anim1.animate();anim2.animate();this.xhrObj.onComplete=function(type,value){if(type==="boolean"){swapFunc();}else if(type==="error"){alert(value);anim1.stop();anim2.stop();node1.style.top=node2.style.top="";node1.style.position=node2.style.position="";that.animating=false;}};var postData="act=swap&"+this.idKeyName+"1="+this.currentId+"&"+this.idKeyName+"2="+targetId;this.xhrObj.open("POST",this.editXhrUrl);this.xhrObj.send(postData);},handleDelete:function(){var folderName=YAHOO.util.Dom.getElementsByClassName("editable_field","div",this.currentItemNode)[0].innerHTML;var con=confirm(YAHOO.Blog.Config.Text.CONFIRM_DELETE_FOLDER+'"'+folderName+'"?');if(!con){return;}
var rowNode=this.currentItemNode.parentNode;var that=this;function getPrevEl(node){for(var el=node.previousSibling;el;el=el.previousSibling){if(el.nodeType===1)return el;}
return null;}
function getNextEl(node){for(var el=node.nextSibling;el;el=el.nextSibling){if(el.nodeType===1)return el;}
return null;}
var removeFunc=function(){var len=that.rowCount;if(len>1){if(YAHOO.util.Dom.hasClass(rowNode,"first")){var node=getNextEl(rowNode);node.className+=" first";}else if(YAHOO.util.Dom.hasClass(rowNode,"last")){var node=getPrevEl(rowNode);node.className+=" last";}}
rowNode.parentNode.removeChild(rowNode);that.rowCount--;that.animating=false;};this.xhrObj.onComplete=function(type,value){if(type==="boolean"){rowNode.style.overflow='hidden';var animConf={opacity:{to:0}};this.animating=true;var anim1=new YAHOO.util.Anim(rowNode,animConf,0.5,YAHOO.util.Easing.easeNone);anim1.onComplete.subscribe(removeFunc);YAHOO.util.Dom.setStyle(rowNode,"background-color","#fff");anim1.animate();}else if(type==="error"){alert(value);}};var postData="act=del&"+this.idKeyName+"="+this.currentId;this.xhrObj.form=document.getElementById('mainFrm');this.xhrObj.open("POST",this.delXhrUrl);this.xhrObj.send(postData);},handleEdit:function(){this.animating=true;var editableFields=YAHOO.util.Dom.getElementsByClassName("editable_field","div",this.currentItemNode);if(this.currentEditableFields.length!==0){YAHOO.util.Dom.setStyle(this.currentEditableFields,"display","block");}
YAHOO.util.Dom.setStyle(editableFields,"display","none");this.currentEditableFields=editableFields;for(var i=0;i<this.editableFieldEditors.length;i++){editableFields[i].parentNode.appendChild(this.editableFieldEditors[i]);YAHOO.util.Dom.getElementsByClassName("editable_fieldvalue","input",this.editableFieldEditors[i])[0].value=editableFields[i].innerHTML;}},addRow:function(target){var fieldEditor=target.parentNode.parentNode;var valueField=YAHOO.util.Dom.getElementsByClassName("editable_fieldvalue","input",fieldEditor)[0];if(valueField.value===""){alert(YAHOO.Blog.Config.Text.ALERT_ENTER_FOLDER_NAME);return;}
var valueKeyName=YAHOO.util.Dom.getElementsByClassName("valueKeyName","input",fieldEditor)[0].value;var buttons=YAHOO.util.Dom.getElementsByClassName("buttons","div",fieldEditor)[0];var loading=YAHOO.util.Dom.getElementsByClassName("loadding","div",fieldEditor)[0];buttons.style.display="none";loading.style.display="block";var that=this;this.xhrObj.onComplete=function(type,value){if(type==="data"){var rows=YAHOO.util.Dom.getElementsByClassName("row","div",that.tableEl);var len=rows.length;var newRow=that.rowTemplate.cloneNode(true);switch(len){case 0:newRow.className="row first last";break;case 1:var lastRow=rows[len-1];lastRow.className="row first";newRow.className="row last";break;default:var lastRow=rows[len-1];lastRow.className="row";newRow.className="row last";break;}
var editableField=YAHOO.util.Dom.getElementsByClassName("editable_field","div",newRow)[0];var idEl=YAHOO.util.Dom.getElementsByClassName("id","input",newRow)[0];editableField.innerHTML=valueField.value;valueField.value="";idEl.value=value.fid;that.rowContainer.appendChild(newRow);that.rowCount++;buttons.style.display="block";loading.style.display="none";}else if(type==="error"){alert(value);buttons.style.display="block";loading.style.display="none";}};var postData="act=add&"+valueKeyName+"="+valueField.value;this.xhrObj.open("POST",this.addXhrUrl);this.xhrObj.send(postData);},saveEdit:function(target){if(!this.xhrAvailable)return;var fieldEditor=target.parentNode.parentNode;var cell=fieldEditor.parentNode;var editableField=YAHOO.util.Dom.getElementsByClassName("editable_field","div",cell)[0];var valueField=YAHOO.util.Dom.getElementsByClassName("editable_fieldvalue","input",fieldEditor)[0];var valueKeyName=YAHOO.util.Dom.getElementsByClassName("valueKeyName","input",fieldEditor)[0].value;var buttons=YAHOO.util.Dom.getElementsByClassName("buttons","div",fieldEditor)[0];var loadding=YAHOO.util.Dom.getElementsByClassName("loadding","div",fieldEditor)[0];buttons.style.display="none";loadding.style.display="block";var that=this;this.xhrObj.onComplete=function(type,value){if(type==="boolean"){editableField.innerHTML=valueField.value;valueField.value="";that.cancelEdit();buttons.style.display="block";loadding.style.display="none";}else if(type==="error"){alert(value);buttons.style.display="block";loadding.style.display="none";}};var postData="act=edit&"+this.idKeyName+"="+this.currentId+"&"+valueKeyName+"="+valueField.value;this.xhrObj.open("POST",this.editXhrUrl);this.xhrObj.send(postData);},cancelEdit:function(){this.animating=false;YAHOO.util.Dom.setStyle(this.currentEditableFields,"display","block");this.currentEditableFields=[];for(var i=0;i<this.editableFieldEditors.length;i++){this.editableFieldEditors[i].parentNode.removeChild(this.editableFieldEditors[i]);}}}})();(function(){YAHOO.util.Event.onContentReady('gallery_list',function(){function updateOpener(){if(document.gallery_popup.pic){if(document.gallery_popup.pic.length){for(var i=0;i<document.gallery_popup.pic.length;i++){if(document.gallery_popup.pic[i].checked)
var selected=document.gallery_popup.pic[i].value;}}else{var selected=document.gallery_popup.pic.value;}
window.opener.YAHOO.Blog.utils.insertPhoto(selected);}
self.close();}
var buttons=YAHOO.util.Dom.getElementsByClassName('photo-choose-select-button','button');YAHOO.util.Event.addListener(buttons,'click',updateOpener);var cbuttons=YAHOO.util.Dom.getElementsByClassName('photo-choose-cancel-button','button');YAHOO.util.Event.addListener(cbuttons,'click',function(e){window.opener.YAHOO.Blog.utils.insertPhoto(undefined);self.close();});});})();(function(){var $Y=YAHOO.util,$D=$Y.Dom,$E=$Y.Event,$L=$Y.Lang;YAHOO.Blog.Gallery={MenuButton:function(buttonId,menuId,formOption){if(formOption==undefined)formOption='m';this.init(buttonId,menuId,formOption);},Menu:function(menuId,formOption){this.init(menuId,formOption);},TableGrid:function(tableId){this.init(tableId);}};var $G=YAHOO.Blog.Gallery;$G.MenuButton.prototype={init:function(buttonId,menuId,formOption){this.elButton=$D.get(buttonId);this.menu=new $G.Menu.getInstance(menuId,formOption);this.initListeners();},initListeners:function(){$E.on(this.elButton,'click',this.onClick,this,true);},onClick:function(e){if((this.menu.elButton===this.elButton)&&(this.menu.isVisible())){this.menu.hide();}else{this.menu.hide();this.menu.changeButton(this.elButton);this.menu.show();$E.stopEvent(e);}}}
$G.Menu.prototype={init:function(menuId,formOption_arg){this.formOption=formOption_arg;this.elMenu=$D.get(menuId);this.initListeners();},initListeners:function(){$E.on(this.elMenu,'click',this.onClick,this,true);$E.on(this.elMenu,'mouseout',this.onMouseOut,this,true);$E.on(this.elMenu,'mouseover',this.onMouseOver,this,true);$E.on(this.elMenu,'mouseout',this.onMouseOut,this,true);},changeButton:function(elButton){this.elButton=elButton;var bPos=$D.getXY(this.elButton);var x=bPos[0];var y=bPos[1]+this.elButton.offsetHeight;$D.setXY(this.elMenu,[x,y]);},setXY:function(x,y){$D.setXY(this.elMenu,x,y);},onMouseOut:function(e){var target=$E.getTarget(e);if(target.tagName==='A'){target=target.parentNode;}
if(target.tagName==='LI'){target.className='';}},onMouseOver:function(e){var target=$E.getTarget(e);if(target.tagName==='A'){target=target.parentNode;}
if(target.tagName==='LI'){target.className='hover';}},onClick:function(e){var target=$E.getTarget(e);if(target.tagName!=="LI"){target=target.parentNode;}
var form=this.elButton.form;form.nfid.value=target.value;form.act.value=this.formOption;form.submit();$E.stopEvent(e);},onDocumentClick:function(){this.hide();},show:function(){if(!this.isVisible()){this.elMenu.style.visibility='visible';$E.on(document,'click',this.onDocumentClick,this,true);}},hide:function(){if(this.isVisible()){this.elMenu.style.visibility='hidden';$E.removeListener(document,'click',this.onDocumentClick);}},isVisible:function(){return(this.elMenu.style.visibility==='visible');}};$G.TableGrid.prototype={init:function(tableId){this.elTable=$D.get(tableId);this.elToggleAll=$D.get('toggleall');this.checkboxes=document.getElementsByName('mids[]');this.initListeners();if(this.elToggleAll){this.toggleAll();}},initListeners:function(){$E.on('checkall-top','click',this.checkAll,this,true);$E.on('checkall-btm','click',this.checkAll,this,true);$E.on('clearall-top','click',this.clearAll,this,true);$E.on('clearall-btm','click',this.clearAll,this,true);if(this.elToggleAll){$E.on(this.elToggleAll,'click',this.toggleAll,this,true);for(var checkbox in this.checkboxes){$E.on(checkbox,'click',this.resetToggleAll,this,true);}}},toggleAll:function(){if(this.elToggleAll.checked){this.checkAll();}else{this.clearAll();}},checkAll:function(){for(var i=0;i<this.checkboxes.length;i++){this.checkboxes[i].checked=true;}},clearAll:function(){for(var i=0;i<this.checkboxes.length;i++){this.checkboxes[i].checked=false;}},resetToggleAll:function(e){var allChecked=true;for(var i=0;i<this.checkboxes.length;i++){if(!this.checkboxes[i].checked){allChecked=false;break;}}
if(allChecked){this.elToggleAll.checked=true;}else{this.elToggleAll.checked=false;}}}
$L.augmentObject($G.Menu,{cache:[],getInstance:function(menuId,formOption){var cache=$G.Menu.cache;if(cache[menuId]){return cache[menuId];}else{var menu=new $G.Menu(menuId,formOption);cache[menuId]=menu;return menu;}}});})();(function(){YAHOO.Blog.PostGallery=function(){this.init();}
var $Y=YAHOO.util,$D=$Y.Dom,$E=$Y.Event,$G=YAHOO.Blog.Gallery;YAHOO.Blog.PostGallery.prototype={init:function(){new $G.MenuButton('folder-top','foldermenu','m');new $G.MenuButton('showfolder-top','showfoldermenu','s');new $G.TableGrid('datatable');this.elForm=$D.get('form-article-list');this.initListeners();},initListeners:function(){$E.on('delbtn','click',this.onDeleteClick,this,true);},onDeleteClick:function(e){if(confirm(YAHOO.Blog.Config.Text.CONFIRM_PROCESSING)){this.elForm.act.value='d';this.elForm.submit();}}}
$E.onContentReady('article-list',function(){new YAHOO.Blog.PostGallery();});})();(function(){YAHOO.Blog.ColorPicker=function(){if(YAHOO.widget.Slider==null)return;YAHOO.widget.Slider.prototype.baselinePos=[];var Slider=YAHOO.widget.Slider;var Color=YAHOO.util.Color;var Dom=YAHOO.util.Dom;var pickerSize=180;var hue,picker,panel;var trEl,inputField,colorField;var colorPicker=Dom.get("ddPicker");var dlgMask=Dom.get("dialogue-mask");var getH=function(){var h=(pickerSize-hue.getValue())/pickerSize;h=Math.round(h*360);return(h==360)?0:h;}
var getS=function(){return picker.getXValue()/pickerSize;}
var getV=function(){return(pickerSize-picker.getYValue())/pickerSize;}
var swatchUpdate=function(){var h=getH(),s=getS(),v=getV();Dom.get("hval").value=h;Dom.get("sval").value=Math.round(s*100);Dom.get("vval").value=Math.round(v*100);var rgb=Color.hsv2rgb(h,s,v);var styleDef="rgb("+rgb.join(",")+")";Dom.setStyle("swatch","background-color",styleDef);Dom.get("rval").value=rgb[0];Dom.get("gval").value=rgb[1];Dom.get("bval").value=rgb[2];Dom.get("hexval").value=Color.rgb2hex(rgb[0],rgb[1],rgb[2]);};var hueUpdate=function(newOffset){var rgb=Color.hsv2rgb(getH(),1,1);var styleDef="rgb("+rgb.join(",")+")";Dom.setStyle("pickerDiv","background-color",styleDef);swatchUpdate();};var pickerUpdate=function(newOffset){swatchUpdate();};var isValidHex=function(hex){var matches=hex.match(/^#[0-9a-fA-F]{3}$|^#[0-9a-fA-F]{6}$/i);return matches?true:false;};var setColor=function(){if(isValidHex(inputField.value)){var hex=inputField.value.replace("#","");if(hex.length==3){var arr=[];for(var i=0;i<hex.length;i++){arr.push(hex.charAt(i),hex.charAt(i));}
hex=arr.join("");}
var rgb=Color.hex2rgb(hex);var hsv=Color.rgb2hsv(rgb[0],rgb[1],rgb[2]);hue.setValue(Math.round((360-hsv.h)/360*pickerSize),true);picker.setRegionValue(Math.round(hsv.s*pickerSize),Math.round((255-hsv.v)/255*pickerSize),true);Dom.get("hval").value=Math.round(hsv.h);Dom.get("sval").value=Math.round(hsv.s*100);Dom.get("vval").value=Math.round(hsv.v/255*100);Dom.get("rval").value=rgb[0];Dom.get("gval").value=rgb[1];Dom.get("bval").value=rgb[2];Dom.setStyle("swatch","background-color","rgb("+rgb.join(",")+")");Dom.get("hexval").value=hex;}else{hue.setValue(0,true);picker.setRegionValue(0,0,true);}};var correctPNG=function(){for(var i=0;i<document.images.length;i++){var img=document.images[i];var imgName=img.src.toUpperCase();if(imgName.substring(imgName.length-3,imgName.length)=="PNG"){var imgID=(img.id)?"id='"+img.id+"' ":"";var imgClass=(img.className)?"class='"+img.className+"' ":"";var imgTitle=(img.title)?"title='"+img.title+"' ":"title='"+img.alt+"' ";var imgStyle="display:inline-block;"+img.style.cssText;if(img.align=="left")imgStyle="float:left;"+imgStyle;if(img.align=="right")imgStyle="float:right;"+imgStyle;if(img.parentElement.href)imgStyle="cursor:hand;"+imgStyle;var newHTML=[];newHTML[newHTML.length]="<span ";newHTML[newHTML.length]=imgID;newHTML[newHTML.length]=imgClass;newHTML[newHTML.length]=imgTitle;newHTML[newHTML.length]=" style=\"";newHTML[newHTML.length]="width:";newHTML[newHTML.length]=img.width;newHTML[newHTML.length]="px; height:";newHTML[newHTML.length]=img.height;newHTML[newHTML.length]="px;";newHTML[newHTML.length]=imgStyle;newHTML[newHTML.length]=";"
newHTML[newHTML.length]="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader";newHTML[newHTML.length]="(src=\'";newHTML[newHTML.length]=img.src;newHTML[newHTML.length]="\', sizingMethod='scale');\"></span>";img.outerHTML=newHTML.join("");}}};return{init:function(){YAHOO.widget.Slider.prototype.baselinePos=[];hue=Slider.getVertSlider("hueBg","hueThumb",0,pickerSize);hue.subscribe("change",hueUpdate);picker=Slider.getSliderRegion("pickerDiv","selector",0,pickerSize,0,pickerSize);picker.subscribe("change",pickerUpdate);YAHOO.util.Event.on(document.getElementById("btn_close_picker"),"click",this.hide,this,true);YAHOO.util.Event.on(document.getElementById("btn_save_picker"),"click",this.save,this,true);if(YAHOO.env.ua.ie)dlgMask.shim=new YAHOO.Blog.Shim(dlgMask);if(YAHOO.env.ua.ie===5.5||YAHOO.env.ua.ie===6)correctPNG();},show:function(e,argObj){YAHOO.util.DDM.unlock();trEl=argObj["trEl"];inputField=argObj["iFd"];colorField=argObj["cFd"];dlgMask.style.display="block";region=Dom.getRegion(argObj["el"]);x=region.left;y=region.top;var style=Dom.get("ddPicker").style;style.top=y+130+"px";style.left=x+120+"px";picker.verifyOffset();hue.verifyOffset();setColor();YAHOO.env.ua.ie&&dlgMask.shim.expand();style.zIndex="25000";style.visibility="visible";},hide:function(){if(!YAHOO.Blog.isEditMode){YAHOO.util.DDM.lock();}
Dom.get("ddPicker").style.visibility="hidden";Dom.get("ddPicker").style.zIndex="";dlgMask.style.display="none";inputField=colorField=null;YAHOO.env.ua.ie&&dlgMask.shim.collapse();},save:function(){var hexColor=Dom.get("hexval").value;if(inputField)inputField.value="#"+hexColor;if(colorField)colorField.style.background="#"+hexColor;if(trEl)trEl.className="";this.hide();}}}();YAHOO.util.Event.onContentReady('ddPicker',function(){YAHOO.Blog.ColorPicker.init();});})();(function(){if(!YAHOO.Blog.scriptFilter({ids:["who_tagged_me"]})){return;}
var mouseOverHandler=function(e){var target=YAHOO.util.Event.getTarget(e);var dropList=YAHOO.util.Dom.getElementsByClassName("user-action-dropdown",'',target.parentNode.parentNode.parentNode)[0];if(dropList){var xy=YAHOO.Blog.utils.getOffsetPosition(target);YAHOO.util.Dom.setStyle(dropList,'display','block');YAHOO.util.Dom.setStyle(dropList,'left',xy[0]+'px');var newy=xy[1]+target.offsetHeight-2;YAHOO.util.Dom.setStyle(dropList,'top',newy+'px');}};var mouseOutHandler=function(e){var target=YAHOO.util.Event.getTarget(e);var cName=target.className;switch(cName){case'title':case'user-action-trigger':var related=YAHOO.util.Event.getRelatedTarget(e);if(related&&related.className!=="user-action-dropdown"){var dropList=YAHOO.util.Dom.getElementsByClassName("user-action-dropdown",'',target.parentNode.parentNode.parentNode)[0];if(dropList){dropList.style.display="none";}}
break;case"user-action-dropdown":var related=YAHOO.util.Event.getRelatedTarget(e);if(!YAHOO.util.Dom.isAncestor(target,related)){target.style.display="none";}
break;case"addtofriends":case"addtoblacklist":var related=YAHOO.util.Event.getRelatedTarget(e);if(related){if(!related.className.match(/title|user-action-trigger|user-action-dropdown|addtofriends|addtoblacklist/)){var dropList=YAHOO.util.Dom.getElementsByClassName("user-action-dropdown",'',target.parentNode.parentNode.parentNode)[0];if(dropList){dropList.style.display="none";}}}else{var dropList=YAHOO.util.Dom.getElementsByClassName("user-action-dropdown",'',target.parentNode.parentNode.parentNode)[0];if(dropList){dropList.style.display="none";}}
break;}};var actionLinks=YAHOO.util.Dom.getElementsByClassName('user-action-trigger','a');if(actionLinks){YAHOO.util.Event.addListener(actionLinks,'mouseover',mouseOverHandler);YAHOO.util.Event.addListener(actionLinks,'mouseout',mouseOutHandler);}
var actionDropdowns=YAHOO.util.Dom.getElementsByClassName('user-action-dropdown','ul');if(actionDropdowns){YAHOO.util.Event.addListener(actionDropdowns,'mouseout',mouseOutHandler);}})();(function(){if(!YAHOO.Blog.scriptFilter({ids:["profile_photo"]})){return;}
var selectRadio=function(e,o){document.getElementById('ulimg'+o.buttonNumber+'_pc').checked=true;}
YAHOO.util.Event.addListener('ulimg1','click',selectRadio,{'buttonNumber':1});YAHOO.util.Event.addListener('ulimg2','click',selectRadio,{'buttonNumber':2});YAHOO.util.Event.addListener('ulimg3','click',selectRadio,{'buttonNumber':3});YAHOO.util.Event.addListener('ulimg4','click',selectRadio,{'buttonNumber':4});var openGallery=function(e,o){var target=YAHOO.util.Event.getTarget(e);var folderValue=target.options[target.selectedIndex].value;if(!folderValue||folderValue==''){document.getElementById('ulimg'+o.buttonNumber+'_album').checked=false;document.getElementById('selectedPhotoUpdate').value='';return true;}
document.getElementById('ulimg'+o.buttonNumber+'_album').checked=true;document.getElementById('selectedPhotoUpdate').value=o.buttonNumber;var crumb=document.getElementById('crumb').value;YAHOO.Blog.utils.openwin(YAHOO.Blog.Config.Url.UPLOADER+'/api/fe/photo_choose?folder='+folderValue+'&.crumb='+crumb,'prf_photo','800','500','front');}
YAHOO.util.Event.addListener('ulimg_select1','change',openGallery,{'buttonNumber':1});YAHOO.util.Event.addListener('ulimg_select2','change',openGallery,{'buttonNumber':2});YAHOO.util.Event.addListener('ulimg_select3','change',openGallery,{'buttonNumber':3});YAHOO.util.Event.addListener('ulimg_select4','change',openGallery,{'buttonNumber':4});})();
function privacySelected(privateId,familyId,friendId){privateObj=document.getElementById(privateId);familyObj=document.getElementById(familyId);friendObj=document.getElementById(friendId);if(privateObj.checked){familyObj.disabled=false;friendObj.disabled=false;}else{familyObj.checked=false;friendObj.checked=false;familyObj.disabled=true;friendObj.disabled=true;}}
function toggle(elementId){var element=document.getElementById(elementId);var elementClass=element.className;if(elementClass.match('invisible')){elementClass=elementClass.replace(/invisible/gi,'visible');}else{elementClass=elementClass.replace(/visible/gi,'invisible');}
element.className=elementClass;}
(function(){var YUE=YAHOO.util.Event;var YUD=YAHOO.util.Dom;if(!YAHOO.Blog.scriptFilter({ids:["blog_myblog_index"]})){return;}
YUE.onAvailable('blog_myblog_index',function(){var loader=YAHOO.Blog.dialogueLoader;function checkFileUploadEl(){var inputArr=loader.dialogueContainer.getElementsByTagName("input");for(var i=0;i<inputArr.length;i+=1){if(inputArr[i].type==="file"){return true;}}
return false;}
function panelClickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="span"){target=target.parentNode;}
var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var loadingIndicator=document.getElementById("loading-indicator");var cName=target.className;switch(cName){case"close":YAHOO.util.Event.stopEvent(e);loader.clear();break;case"save":if(target.tagName.toLowerCase()=="input"){YAHOO.util.Event.stopEvent(e);if(YAHOO.Blog.utils.validateColor(formEl)){loader.load({method:"POST",form:formEl,data:"act=save",isReload:true,isUploadFile:checkFileUploadEl()});if(loadingIndicator){loadingIndicator.style.visibility="visible";}}}
break;case"step-next":YAHOO.util.Event.stopEvent(e);loader.load({method:"POST",form:formEl,url:formEl.action,data:"act=next"});break;case"step-prev":YAHOO.util.Event.stopEvent(e);loader.load({method:"POST",form:formEl,url:formEl.preUrl.value,data:"act=prev"});break;case"ico-spectrum":var trNode=target.parentNode.parentNode;var ele=YAHOO.util.Dom.getFirstChild(loader.dialogueContainer);var inputField=YAHOO.util.Dom.getElementsByClassName("text","input",trNode)[0];var colorField=YAHOO.util.Dom.getElementsByClassName("picked-color","div",trNode)[0];YAHOO.Blog.ColorPicker.show(e,{"el":ele,"trEl":trNode,"iFd":inputField,"cFd":colorField});break;}}
var clickHandler=function(e){var target=YAHOO.util.Event.getTarget(e),targetEl,cName;if(target.tagName.toLowerCase()=="span"){targetEl=target.parentNode;}else if(target.tagName.toLowerCase()=="a"){targetEl=target;}else return;if(!targetEl){return false;}
switch(targetEl.className){case'mod-edit-btn':YAHOO.util.Event.stopEvent(e);var mod=YAHOO.Blog.utils.getModEl(targetEl);if(mod){var editUrl=YAHOO.Blog.utils.getValueFromModuleList("domId",mod.id,"editUrl");}
if(editUrl&&editUrl!==""){loader.clickHandler=panelClickHandler;loader.load({url:editUrl});}
break;case"mod-close-btn":YAHOO.util.Event.stopEvent(e);var mod=YAHOO.Blog.utils.getModEl(targetEl);if(mod){if(confirm(YAHOO.Blog.Config.Text.CONFIRM_DELETE_MODULE)){YAHOO.Blog.postSequence(mod);var arr=blogModuleLocation[mod.parentNode.id];if(arr.length===0){var boundary=document.getElementById("boundary_"+mod.parentNode.id);var style=boundary.style;style.border='1px dashed #ccc';style.height=mod.offsetHeight-2+'px';style.lineHeight=mod.offsetHeight-2+'px';style.marginBottom='10px';boundary.innerHTML='<h1 style="font-size:30px;text-align:center">'+mod.parentNode.id+'</h1>';style.display="block";}
YAHOO.util.Event.purgeElement(mod,true);mod.parentNode.removeChild(mod);YAHOO.util.Dom.setStyle('drag_indication','display','none');}}
break;}};var scopeIds=["doc","doc2","doc3","blog-edit-menu"];for(var scope,i=0;i<scopeIds.length;i++){scope=document.getElementById(scopeIds[i]);if(scope){YUE.on(scope,'click',clickHandler);}}});})();(function(){var YUD=YAHOO.util.Dom;var YUE=YAHOO.util.Event;YUE.onDOMReady(function(){YAHOO.Blog.lifeline=function(){if(YAHOO.Blog.lifelineArticles[0]===9999){return;}
var modLifeline=document.getElementById("mod_lifeline"),popupTimer,aniWrapper=YUD.getElementsByClassName("ani-wrapper","div","mod_lifeline")[0],ctnrEl=YUD.getElementsByClassName("ctnr","div","mod_lifeline")[0],popMsg=YUD.getElementsByClassName("pop-msg","div",modLifeline)[0],popMsgContent=YUD.getElementsByClassName("rc_bc","div",popMsg)[0],popMsgTemplate='<table><tr><td class="imgctnr"><a href=""><img src="{photoUrl}" alt="" /></a></td><td class="content"><h4><a href="{articleUrl}">{title}</a></h4><p class="date">{postTime}</p><p>{contents}</p></td></tr></table>';popMsgTemplateNoImg='<table><tr><td class="content"><h4><a href="{articleUrl}">{title}</a></h4><p class="date">{postTime}</p><p>{contents}</p></td></tr></table>';btnPrev=YUD.getElementsByClassName("lifeline-prev","a",ctnrEl)[0],btnNext=YUD.getElementsByClassName("lifeline-next","a",ctnrEl)[0],trEl=YUD.getElementsByClassName("ani-canvas","div","mod_lifeline")[0],dateField=document.getElementById('lifeline-date'),moodiconUl=YUD.getElementsByClassName("moodicons","ul","mod_lifeline")[0],lifelineData=[],html=[],step=6,first=last=num=0,cur_page=2,total=999999,containerWidth=525,moodWidth=25,moodBigWidth=50,moodSpaceWidth=6,xhrUrl=YAHOO.Blog.lifelineApi,xhrObj=new YAHOO.Blog.XMLHttpRequest();xhrObj.onComplete=function(type,value){if(type==="data"){if(value[0]===9999){total=lifelineData.length;updateStatus();return;}
parseData(value,true);var aniOffset=computeAniOffset(first,first+step);if(num!==value.length){total=lifelineData.length;YUD.replaceClass(btnNext,'lifeline-next-loading','lifeline-next-off');}else{YUD.replaceClass(btnNext,'lifeline-next-loading','lifeline-next');}
first+=step;computeLast();aniFn(-aniOffset);}else if(type==="error"){alert(value);updateStatus();}else{updateStatus();}}
var computeLast=function(){var itemsWidth=0;for(var i=first;i<total;i++){if(itemsWidth<containerWidth&&lifelineData[i]){itemsWidth+=(lifelineData[i].lifeline==="Y")?moodBigWidth:moodWidth;itemsWidth+=moodSpaceWidth;last=i;}else{return;}}};var computeAniOffset=function(from,to){var aniOffset=0;for(var i=from;i<to;i++){aniOffset+=(lifelineData[i].lifeline==="Y")?moodBigWidth:moodWidth;aniOffset+=moodSpaceWidth;}
return aniOffset;};var updateStatus=function(){var test1=lifelineData;if(first===0){YUD.replaceClass(btnPrev,'lifeline-prev','lifeline-prev-off');}else{YUD.replaceClass(btnPrev,'lifeline-prev-off','lifeline-prev');}
if(last===total-1){YUD.replaceClass(btnNext,'lifeline-next','lifeline-next-off');}else{YUD.replaceClass(btnNext,'lifeline-next-off','lifeline-next');}
dateField.innerHTML=YAHOO.Blog.Config.Text.FROM+" "+lifelineData[last].postTime+" "+YAHOO.Blog.Config.Text.TO+" "+lifelineData[first].postTime;}
var aniFn=function(aniOffset){var anim=new YAHOO.util.Motion(aniWrapper,{points:{by:[aniOffset,0]}},0.5);anim.onComplete.subscribe(function(){updateStatus();});anim.animate();}
var parseData=function(o,isGenerateNode){var itemWidth=0;var index=lifelineData.length;for(var i=0;i<o.length;i++){lifelineData.push(o[i]);if(isGenerateNode){var newMoodLi=document.createElement('li');YAHOO.util.Dom.addClass(newMoodLi,"mood-"+o[i].emotion);if(o[i].lifeline==="Y")
YAHOO.util.Dom.addClass(newMoodLi,'big');newMoodLi.id='mooditemid-'+index;index++;var moodLink=document.createElement('a');moodLink.href=o[i].articleUrl;var moodSpan=document.createElement('span');if(o[i].lifeline==="Y")
YAHOO.util.Dom.addClass(moodSpan,'big');moodSpan.innerHTML='<em>'+o[i].emotion+'</em>';moodLink.appendChild(moodSpan);newMoodLi.appendChild(moodLink);moodiconUl.appendChild(newMoodLi);}}}
var supplant=function(template,o){return template.replace(/{([^{}]*)}/g,function(a,b){var r=o[b];return typeof r==='string'?r:a;});};var setOpacity=function(idx,value){var collection=YUD.getChildren(moodiconUl);for(var i=first;i<=last;i++){if(collection[i].id=='mooditemid-'+idx){continue;}
if(value===1&&YAHOO.env.ua.ie){collection[i].style.filter="";}else{YUD.setStyle(collection[i],"opacity",value);}}};var overHandler=function(e){var target=YUE.getTarget(e);var showPopup=function(){var classArr=[];var id=target.parentNode.parentNode.id.split('-');var idx=id[1];setOpacity(idx,0.3);var template=(lifelineData[idx].photoUrl==="")?popMsgTemplateNoImg:popMsgTemplate;popMsgContent.innerHTML=supplant(template,lifelineData[idx]);var docWidth=YUD.getDocumentWidth();var iconRegion=YAHOO.util.Region.getRegion(target);var popMsgRegion=YAHOO.util.Region.getRegion(popMsg);classArr.push("pop-msg");if(iconRegion.right+(popMsgRegion.right-popMsgRegion.left)>docWidth){var x=iconRegion.left-(popMsgRegion.right-popMsgRegion.left);classArr.push("left");}else{var x=iconRegion.right;}
var y=(iconRegion.top+iconRegion.bottom)/2-(popMsgRegion.bottom-popMsgRegion.top);YUD.setXY(popMsg,[x,y]);classArr.push("on");popMsg.className=classArr.join(" ");};if(target.tagName.toLowerCase()==="span"){popupTimer=setTimeout(showPopup,300);}};var outHandler=function(e){var target=YUE.getTarget(e);var hidePopup=function(){if(popMsg.className!=="pop-msg"){popMsg.className="pop-msg";var id=target.parentNode.parentNode.id.split('-');var idx=id[1];setOpacity(idx,1);}};if(target.tagName.toLowerCase()==="span"){clearTimeout(popupTimer);hidePopup();}};var init=function(){if(YAHOO.Blog.lifelineArticles.length<20){total=YAHOO.Blog.lifelineArticles.length;}
parseData(YAHOO.Blog.lifelineArticles,false);first=0;computeLast();updateStatus();if(total==lifelineData.length&&last==total){YUD.replaceClass(btnNext,'lifeline-next','lifeline-next-off');}
YUE.on(trEl,'mouseover',overHandler);YUE.on(trEl,'mouseout',outHandler);YUE.on(btnPrev,'click',function(){if(YUD.hasClass(btnPrev,'lifeline-prev-off')){return true;}
YUD.replaceClass(btnPrev,'lifeline-prev','lifeline-prev-off');YUD.replaceClass(btnNext,'lifeline-next','lifeline-next-off');if(first>step){var aniOffset=computeAniOffset(first-step,first);first=first-step;}else{var aniOffset=computeAniOffset(0,first);first=0;}
computeLast();aniFn(aniOffset);});YUE.on(btnNext,'click',function(){if(YUD.hasClass(btnNext,'lifeline-next-off')){return true;}
YUD.replaceClass(btnPrev,'lifeline-prev','lifeline-prev-off');var aniOffset=computeAniOffset(first,first+step);num=Math.ceil(aniOffset/moodWidth)-(lifelineData.length-(last+1));if(num<=0||total===lifelineData.length){first+=step;computeLast();aniFn(-aniOffset);}else{YUD.replaceClass(btnNext,'lifeline-next','lifeline-next-loading');cur_page++;num=10;var url=xhrUrl+(xhrUrl.match(/\?/)?"&":"?")+"mid="+cur_page+"&num="+num;xhrObj.open("GET",url);xhrObj.send();}});}();}();});})();(function(){var YUD=YAHOO.util.Dom;var YUE=YAHOO.util.Event;YUE.onContentReady('calendar',function(){var xhrObj=new YAHOO.Blog.XMLHttpRequest();xhrObj.customHandleSuccess=function(o){var myDom=o.responseXML.documentElement;var markup=myDom.getElementsByTagName('markup')[0].firstChild.data;setCalendar(markup);}
var setCalendar=function(markup){var temp=document.createElement('div');temp.innerHTML=markup;var calObj=document.getElementById('calendar');calObj.parentNode.replaceChild(temp.childNodes[0],calObj);init();}
var calendarChangeDate=function(year,month){var baseUrlObj=document.getElementById('baseCalUrl');var url=baseUrlObj.value+'yy='+year+'&mm='+month;xhrObj.open("GET",url);xhrObj.send();}
var calendarPreviousYear=function(){var year=document.getElementById('cy').value;var month=document.getElementById('cm').value;year--;calendarChangeDate(year,month);}
var calendarNextYear=function(){var year=document.getElementById('cy').value;var month=document.getElementById('cm').value;year++;calendarChangeDate(year,month);}
var calendarPreviousMonth=function(){var year=document.getElementById('cy').value;var month=document.getElementById('cm').value;month--;if(month<1){year--;month=12;}
calendarChangeDate(year,month);}
var calendarNextMonth=function(){var year=document.getElementById('cy').value;var month=document.getElementById('cm').value;month++;if(month>12){year++;month=1;}
calendarChangeDate(year,month);}
var init=function(){YUE.addListener('calendar-prev-year','click',calendarPreviousYear);YUE.addListener('calendar-next-year','click',calendarNextYear);YUE.addListener('calendar-prev-month','click',calendarPreviousMonth);YUE.addListener('calendar-next-month','click',calendarNextMonth);}
init();},this);})();(function(){YAHOO.Blog.PhotoGallery=function(){this.init();}
var $Y=YAHOO.util,$D=$Y.Dom,$E=$Y.Event,$L=$Y.Lang,$G=YAHOO.Blog.Gallery;YAHOO.Blog.PhotoGallery.prototype={init:function(){new $G.MenuButton('folder-top','foldermenu');new $G.MenuButton('folder-btm','foldermenu');new $G.TableGrid('datatable');this.elAlbumSelect=$D.get('cfid');this.elForm=$D.get('form-gallery');this.postButtonTop=$D.get('pbtn-top');this.postButtonBottom=$D.get('pbtn-btm');this.delButtonTop=$D.get('delbtn-top');this.delButtonBottom=$D.get('delbtn-btm');this.initListeners();},initListeners:function(){$E.on(this.elAlbumSelect,'change',this.onAlbumChange,this,true);$E.on(this.postButtonTop,'click',this.onPostClick,this,true);$E.on(this.postButtonBottom,'click',this.onPostClick,this,true);$E.on(this.delButtonTop,'click',this.onDeleteClick,this,true);$E.on(this.delButtonBottom,'click',this.onDeleteClick,this,true);},onAlbumChange:function(e){this.elForm.fid.value=this.elAlbumSelect.options[this.elAlbumSelect.selectedIndex].value;this.elForm.submit();},onPostClick:function(e){this.elForm.act.value='post';this.elForm.submit();},onDeleteClick:function(e){if(confirm(YAHOO.Blog.Config.Text.CONFIRM_PROCESSING)){this.elForm.act.value='d';this.elForm.submit();}}}
$E.onContentReady('gallery_list',function(){new YAHOO.Blog.PhotoGallery();});})();(function(){YAHOO.util.Event.onAvailable('moduleJS',function(){if(YAHOO.env.ua.ie===6){try{document.execCommand("BackgroundImageCache",false,true);}catch(err){}}
YAHOO.Blog.postSequence=function(el,indication){function arrEx(arr,refValue,method,newValue,offset){for(var i=0,lth=arr.length;i<lth;i++){if(arr[i]===refValue){if(method==="del"){arr.splice(i,1);return arr.length;}else if(method==="add"){arr.splice(i+offset,0,newValue);return arr.length;}}}
return false;}
function getSequence(){var arr=[];arr[arr.length]="head="+blogModuleLocation["head"].join(",")
arr[arr.length]="col1="+blogModuleLocation["col1"].join(",")
arr[arr.length]="col2="+blogModuleLocation["col2"].join(",")
arr[arr.length]="col3="+blogModuleLocation["col3"].join(",")
arr[arr.length]="tail="+blogModuleLocation["tail"].join(",")
arr[arr.length]="layoutId="+blogModuleLocation['layoutId']
arr[arr.length]="wssid="+wssid;return arr.join("&");}
var lastSequence=getSequence();var url=typeof(f2e_dev)==="undefined"?YAHOO.Blog.Config.Url.API_SAVE_BLOG_LAYOUT:"api/saveBlogLayout.php";var xhrObj=new YAHOO.Blog.XMLHttpRequest();xhrObj.open("POST",url);return function(el,indication){var targEl,targArr,data,origArr=blogModuleLocation[el.parentNode.id];if(indication){targEl=indication.location[0];if(targEl!=="undefined"&&targEl!==el){targArr=blogModuleLocation[targEl.parentNode.id];arrEx(origArr,el.listId,"del");(typeof targEl.listId=="number")?arrEx(targArr,targEl.listId,"add",el.listId,indication.location[1]):targArr.push(el.listId);data=getSequence();if(data.indexOf("undefined")===-1&&data!==lastSequence){xhrObj.send(data);lastSequence=data;}}}else{arrEx(origArr,el.listId,"del");lastSequence=data=getSequence();xhrObj.send(data);}};}();YAHOO.Blog.DD=function(id,sGroup,config){if(id){this.init(id,sGroup,config);this.initIndication();}};YAHOO.extend(YAHOO.Blog.DD,YAHOO.util.DD);YAHOO.Blog.DD.prototype.haveRelativeParent=function(el){return YAHOO.util.Dom.getStyle(el.parentNode,"position")=="relative"?el.parentNode:null;};YAHOO.Blog.DD.prototype.getContentWidth=function(el){var getInt=function(el,style){return parseInt((YAHOO.util.Dom.getStyle(el,style)));};return el.offsetWidth-(getInt(el,"padding-left")+getInt(el,"padding-right")+getInt(el,"border-left-width")+getInt(el,"border-right-width"));};YAHOO.Blog.DD.prototype.onMouseDown=function(e){var el=this.el=this.getDragEl(),parentEl=this.parentEl=el.parentNode,indication=this.indication,style=el.style;var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="span"){target=target.parentNode;}
if(target.className=='mod-edit-btn'||target.className=='mod-close-btn'){return true;}
this.handleEl=document.getElementById(el.id+"Drag");indication.pGroup=el.pGroup;indication.style.height=(el.offsetHeight-2)+'px';parentEl.insertBefore(indication,el);indication.location=[el,0];style.zIndex=100000;(YAHOO.env.ua.ie===0)?style.opacity=0.85:el.runtimeStyle.filter='alpha(opacity=85)';indication.style.display='block';this.relativeParent=this.haveRelativeParent(el);if(this.relativeParent&&YAHOO.env.ua.gecko){this.relativeParent.style.position="static";}
style.left=this.startPageX+'px';style.top=this.startPageY+'px';style.width=el.offsetWidth+"px";style.position='absolute';if(YAHOO.env.ua.ie){el.setCapture();}};YAHOO.Blog.DD.prototype.onMouseUp=function(e){var indication=this.indication,el=this.el,style=el.style,parentEl=indication.parentNode;el.pGroup=indication.pGroup;this.needFixPosition=false;this.handleEl.style.cursor="";YAHOO.Blog.postSequence(el,indication);var handler=function(){parentEl.insertBefore(el,indication);indication.style.display='none';style.position='';style.width='';style.top='';style.left='';style.zIndex="";false?(el.runtimeStyle.filter='alpha(opacity=100)'):(style.opacity="");}();if(YAHOO.env.ua.ie){el.releaseCapture();}
if(this.relativeParent&&YAHOO.env.ua.ie){this.relativeParent.style.position="relative";}};YAHOO.Blog.DD.prototype.initIndication=function(){var body=document.body;var indication=document.getElementById('drag_indication');if(!indication){var indication=document.createElement("div");indication.id='drag_indication';body.insertBefore(indication,body.firstChild);}
this.indication=indication;};YAHOO.Blog.DD.prototype.getBoundary=function(){var pNode=this.indication.parentNode;return YAHOO.util.Dom.getElementsByClassName('boundary','div',pNode)[0];};YAHOO.Blog.DD.prototype.isAlone=function(){var el=this.el;var pNode=this.indication.parentNode;var dds=YAHOO.util.Dom.getElementsByClassName('mod_all','div',pNode);if(el.parentNode==pNode&&dds.length==1){return true;}else if(el.parentNode!=pNode&&dds.length==0){return true;}else{return false;}};YAHOO.Blog.DD.prototype.handleBoundary=function(){var boundary=this.getBoundary();var style=boundary.style;style.border='1px dashed #ccc';style.height=style.lineHeight=this.indication.offsetHeight-2+'px';style.marginBottom='10px';};YAHOO.Blog.DD.prototype.onDragEnter=function(e,id){var targetEl=this.targetEl=document.getElementById(id);var dragEl=this.el;var indication=this.indication;this.isReact=this.groups[targetEl.pGroup];if(!this.isReact)this.handleEl.style.cursor="not-allowed";if(!this.isReact||indication.parentNode==targetEl.parentNode)return;var y=YAHOO.util.Dom.getY(targetEl);var iy=YAHOO.util.Dom.getY(indication);var h=YAHOO.util.Dom.get(targetEl).offsetHeight;var mid=y+h/2;var dy=YAHOO.util.Dom.getY(dragEl);var pNode=indication.parentNode;var isEmpty=this.isAlone();isEmpty&&this.handleBoundary();if(targetEl.className=='boundary'){if(targetEl.pGroup=="head")this.boundaryHeight=targetEl.offsetHeight;targetEl.parentNode.insertBefore(indication,targetEl);indication.location=[targetEl,0];var style=targetEl.style;style.height='1px';style.lineHeight='';style.border='0px';style.marginBottom='0px';}else{if(dy>mid){targetEl.parentNode.insertBefore(indication,targetEl.nextSibling);indication.location=[targetEl,1];}else{targetEl.parentNode.insertBefore(indication,targetEl);indication.location=[targetEl,0];}}
this.indication.pGroup=targetEl.pGroup;if(this.relativeParent&&true){var dds=YAHOO.util.Dom.getElementsByClassName('mod_all','div',targetEl.parentNode);if(targetEl.pGroup=="head"){this.needFixPosition=true;}else{this.needFixPosition=false;}
this.b4Drag(e);}};YAHOO.Blog.DD.prototype.onDragOut=function(e,id){this.isReact=false;this.handleEl.style.cursor="move";this.DDM.refreshCache(this.groups);};YAHOO.Blog.DD.prototype.onDragOver=function(e,id){var targetEl=document.getElementById(id);var dragEl=this.el;var indication=this.indication;if(!this.isReact)this.handleEl.style.cursor="not-allowed";if(!this.isReact||(targetEl.className=='boundary')||(indication.parentNode!=targetEl.parentNode)){return;}
var y=YAHOO.util.Dom.getY(targetEl);var h=YAHOO.util.Dom.get(targetEl).offsetHeight;var mid=y+h/2;var ey=YAHOO.util.Event.getPageY(e);if(ey<YAHOO.util.Dom.getY(indication)){if(ey<mid){var p=targetEl.parentNode;p.insertBefore(indication,targetEl);indication.location=[targetEl,0];}}
if(ey>YAHOO.util.Dom.getY(indication)){if(ey>mid){var p=targetEl.parentNode;p.insertBefore(indication,targetEl.nextSibling);indication.location=[targetEl,1];}}};YAHOO.Blog.DDBoundary=function(id,sGroup,config){if(id){this.init(id,sGroup,config);this.isBoundary=true;}};YAHOO.extend(YAHOO.Blog.DDBoundary,YAHOO.util.DDTarget);YAHOO.Blog.DDBoundary.prototype.toString=function(){return"DDBoundary "+this.id;};YAHOO.Blog.DDApp=function(){return{init:function(){function handler(col,colId,pGroup){var l=col.length;if(l===0&&pGroup===null){return;}
for(var j=0;j<l;j++){var listIndex=col[j];var sConfig=moduleList[listIndex];if(typeof sConfig==="undefined"){continue;}
var id=sConfig.domId;var el=document.getElementById(id);if(el===null){continue;}
var dd=new YAHOO.Blog.DD(id);dd.setHandleElId(id+'Drag');dd.addInvalidHandleType("span");dd.addInvalidHandleType("a");el.pGroup=pGroup;el.listId=sConfig.id;sConfig['head']&&dd.addToGroup('head');sConfig['tail']&&dd.addToGroup('tail');sConfig['col150']&&dd.addToGroup('col150');sConfig['col600']&&dd.addToGroup('col600');dd.removeFromGroup('default');if(sConfig['mandatory']){var closeBtn=YAHOO.util.Dom.getElementsByClassName("mod-close-btn",'a',id)[0];if(closeBtn)closeBtn.style.visibility='hidden';}
if(sConfig["editUrl"]===""){var closeBtn=YAHOO.util.Dom.getElementsByClassName("mod-edit-btn",'a',id)[0];if(closeBtn)closeBtn.style.visibility='hidden';}}
var boundary=document.createElement("div");boundary.id="boundary_"+colId;boundary.className="boundary";boundary.pGroup=pGroup;var style=boundary.style;if(l==0){style.border='1px dashed #ccc';style.marginBottom='10px';style.height=style.lineHeight="100px";}else{style.height="1px";}
var pNode=YAHOO.util.Dom.get(colId);if(pNode){pNode.appendChild(boundary);new YAHOO.Blog.DDBoundary(boundary.id,pGroup);}};ele=YAHOO.util.Dom.get("blog_myblog_index");if(ele==null){return;}
var getGroup=function(id){if(YAHOO.util.Dom.hasClass(id,"col-600"))return"col600";else if(YAHOO.util.Dom.hasClass(id,"col-150"))return"col150";else return null;};handler(blogModuleLocation["head"],"head","head");handler(blogModuleLocation["col1"],"col1",getGroup("col1"));handler(blogModuleLocation["col2"],"col2",getGroup("col2"));handler(blogModuleLocation["col3"],"col3",getGroup("col3"));handler(blogModuleLocation["tail"],"tail","tail");YAHOO.util.DDM.mode=0;if(!YAHOO.Blog.isEditMode){YAHOO.util.DDM.lock();}}}}();YAHOO.Blog.DDApp.init();},this);})();function checkSome(toggleEl,targetClass){var toggleState=toggleEl.checked;YAHOO.util.Dom.getElementsByClassName(targetClass,"input","",function(el){el.checked=toggleState;});}
function checkAll(delallcmts){var checked=delallcmts.checked;var col=document.getElementsByTagName("input");for(var i=0;i<col.length;i++){col[i].checked=checked;}}
YAHOO.namespace("Updates").Disclosure=function()
{var PROXY_URL="/h/updates_status";var YAHOO_DEST_ID=100;var createNode=function(type,attrs)
{var n=document.createElement(type);for(var a in attrs){if(a=="innerHTML"){n.innerHTML=attrs[a];}else if(attrs[a]&&YAHOO.lang.hasOwnProperty(attrs,a)){n.setAttribute(a,attrs[a]);}}
return n;};var appendToHead=function(type,attrs)
{var h=document.getElementsByTagName("head")[0];var n=createNode(type,attrs);h.appendChild(n);return n;};var addCss=function(content,inline)
{return content.indexOf("http")===0||inline===false?appendToHead("link",{"type":"text/css","charset":"utf-8","rel":"stylesheet","href":content}):appendToHead("style",{"type":"text/css","innerHTML":content});};var addJs=function(content,inline)
{return content.indexOf("http")===0||inline===false?appendToHead("script",{"type":"text/javascript","charset":"utf-8","src":content}):appendToHead("script",{"type":"text/javascript","charset":"utf-8","innerHTML":content});};var getXmlNodeValue=function(xml,name)
{var node=xml.getElementsByTagName(name);if(node.length&&node[0].firstChild){node=node[0].firstChild.nodeValue;}else{node=false;}
return node;};var getMaxZindex=function(){var dnodes=document.getElementsByTagName("div"),maxZindex=0;for(var i=0,l=dnodes.length;i<l;i++){var s=Number(dnodes[i].style.zIndex);if(s>maxZindex){maxZindex=s;}}
return maxZindex;};var d;var getDialog=function(){return d;};var destroyDialog=function(){if(d){d.destroy();d=null;}};var showAndPositionTooltipKnob=function(tt,position){var yud=YAHOO.util.Dom,ttKnob=getTooltipKnob();yud.setStyle(ttKnob,"display","block");yud.setStyle(ttKnob,'left',position[0]+"px");yud.setStyle(ttKnob,'top',position[1]+"px");yud.setStyle(ttKnob,"zIndex",(tt.cfg.getProperty("zIndex")+2));};var buildBroadcastersOverlayMarkup=function(respData){var hasEnabledBroadcasters=false,enabledBroadcasterHeader='<div class="disc-ov-msg">'+
respData.message+'</div> <div class="disc-ov-mng">'+'<a href="'+respData.manageURL+'">'+
respData.manageTxt+'</a>'+'</div>',broadcasters=respData.syndication,enabledBroadcastersHtml="",hasUnlinkedBroadcasters=false,unlinkedBroadcastersHtml="";var yue=YAHOO.util.Event,yud=YAHOO.util.Dom,ywo=YAHOO.widget.Overlay,ttCollection=[];for(var i=0,l=broadcasters.length,ttCount=0;i<l;i++){var b=broadcasters[i],ctxid='ov_disc_bcst_img_'+b.destination;if((b.status==="ENABLED")&&(b.destination!=YAHOO_DEST_ID||b.constraint!="PRIVATE")){hasEnabledBroadcasters=true;var ttid="ov_disc_tooltip_"+ctxid;var tt=new ywo(ttid,{visible:false,modal:true});tt.setBody('<div class="disc-tooltip"><div>'+
b.iconTxt+'</div></div>');tt.render(document.body);ttCollection[ttCount]=tt;ttCount++;var ttHideTimer;var showTooltip=(function(){var ttl=tt;var ctxidl=ctxid;return function(){if(ttHideTimer){ttHideTimer.cancel();}
for(var j=0,k=ttCollection.length;j<k;j++){if(typeof(ttCollection[j])!=='undefined')
{var c=ttCollection[j];if(ttl!=c){c.hide();}}}
var context=yud.get(ctxidl),ctxRegion=yud.getRegion(context),targetXY=[(ctxRegion.left-20),(ctxRegion.bottom+8)];yud.setStyle(ttl.element,'left',targetXY[0]+"px");yud.setStyle(ttl.element,'top',targetXY[1]+"px");ttl.cfg.setProperty("zIndex",(yud.getStyle("yup-dialog_c",'zIndex')+2));showAndPositionTooltipKnob(ttl,[ctxRegion.left,ctxRegion.bottom]);ttl.show();};})();yue.addListener(ctxid,'mouseover',showTooltip);yue.addListener(ttid,'mouseover',showTooltip);var hideTooltip=(function(){var ttl=tt;return function(){ttHideTimer=YAHOO.lang.later(1,ttl,function(){yud.setStyle(getTooltipKnob(),"display","none");ttl.hide();});};})();yue.addListener(ctxid,'mouseout',hideTooltip);yue.addListener(ttid,'mouseout',hideTooltip);var ua=YAHOO.env.ua,imAltText='alt="'+b.iconTxt+'"';if(ua.ie&&(ua.ie<8)){imAltText="";}
var h='<img src="'+b.iconURL+'" id="'+ctxid+'"'+imAltText+' />';enabledBroadcastersHtml+=h;}else if(b.status==="UNLINKED"){hasUnlinkedBroadcasters=true;var upsellLinkId="ov_disc_upsell_link_"+b.destination,h='<div id="'+ctxid+'"> <img src="'+b.iconURL+'" alt="'+b.iconTxt+'" />'+'<a href="#" id="'+upsellLinkId+'">'+b.linkTxt+'</a></div>';unlinkedBroadcastersHtml+=h;yue.addListener(upsellLinkId,'click',function(){var initEndPoint=b['linkURL'];return function(e){initAuthWindow();YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{'success':initOverlayAuthorizationFlow,'argument':respData},"initRestApiUrl="+initEndPoint+"&destId="+b.destination+"&lang="+respData.lang+"&message="+respData.message+"&"+respData.crumbName+"="+respData.crumb);};}());}}
var bcstrsMkup="";if(hasEnabledBroadcasters){var h='<div class="ebcstrs_c">'+
enabledBroadcasterHeader+'<div class="ebcstrs">'+
enabledBroadcastersHtml+'</div> </div>';bcstrsMkup+=h;}
if(hasUnlinkedBroadcasters){var h='<div class="unbcstrs_c">'+
unlinkedBroadcastersHtml+'</div>';bcstrsMkup+=h;}
return bcstrsMkup;};var show=function(args)
{if(!YAHOO.lang.isObject(args)||!args.source||!args.container||(!args.response&&!args.type))
{return false;}
var buildDialog=function(resp){destroyDialog();if(!resp&&args.response){var data=args.response;}else{var data=YAHOO.lang.JSON.parse(resp.responseText);}
var disclose=data.disclosure||false;if(!YAHOO.lang.isString(disclose)||(disclose.toLowerCase()!="show"&&disclose.toLowerCase()!="showchecked")){return 0;}
if(data.global_optout=="1"){return;}
var bcstrs=data.syndication,hasEnabledNetworks=false,b;for(var i=0,l=bcstrs.length;i<l;i++){b=bcstrs[i];if((b.status==="ENABLED")&&(b.destination!=YAHOO_DEST_ID||b.constraint!="PRIVATE")){hasEnabledNetworks=true;}}
if(!hasEnabledNetworks){return;}
if(data.style){addCss(data.style);}
var yud=YAHOO.util.Dom;var handleButton=function()
{this.submit();};d=new YAHOO.widget.SimpleDialog("yup-dialog",{width:"400px",underlay:"shadow",modal:true,fixedcenter:true,close:true,postmethod:"async",visible:false,draggable:false,monitorresize:false,constraintoviewport:true,zIndex:2000000001,buttons:[{text:data.button,handler:handleButton,isDefault:false}]});if(args.events){for(var e in args.events){if(d[e]&&d[e].subscribe){var ev=args.events[e];d[e].subscribe(ev.fn,ev.obj||d,ev.scope);}}}
d.setHeader(data.loc_localizedName);var body="";var successMsg='<div class="result">'+data.result+'</div>';body+=successMsg;body+=buildBroadcastersOverlayMarkup(data);d.setBody(body);yud.addClass(args.container,"yui-skin-sam");d.render(args.container);var f=createNode("form",{"id":"yup-show","action":PROXY_URL,"method":"POST"});var checked=(disclose.toLowerCase()=="showchecked")?'"checked=checked"':'';f.innerHTML=['<input type="checkbox" id="yup_ov_disc_option" '+checked,' name="yup_ov_disc_option" >','<label for="yup_ov_disc_option">'+data.prompt+'</label>','<input type="hidden" name="source" value="'+args.source+'">','<input type="hidden" name="message" value="'+data.message+'">','<input type="hidden" name="'+data.crumb_name+'" value="'+data.crumb+'">','<input type="hidden" name="ov_disc_form" value="submitForm">'].join("");d.appendToBody(f);d.form.parentNode.replaceChild(f,d.form);d.form=f;if(disclose.toLowerCase()=="showchecked")
{document.getElementById('yup_ov_disc_option').checked=true;}
d.show();if(data.script){addJs(data.script);}};var queryStatus=function(){YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{success:buildDialog},"source="+args.source+"&type="+args.type+"&lang="+(args.lang||'en-US')+"&message="+args.message+"&get_disc=true&format=xml");};var baseYuiPath=args.yuiBasePath||"yui/2.6.0/build/",comboHostBasePath="http://l.yimg.com/d/combo?";var checkYui=function(attached){var hasConnect=YAHOO.env.modules.connection?true:false,hasJson=YAHOO.env.modules.json?true:false,hasDialog=YAHOO.env.modules.container?true:false;if(hasConnect&&hasDialog){if(args.response){buildDialog();}else{queryStatus();}}else{if(!attached){if(!hasDialog){addCss(comboHostBasePath+baseYuiPath+"container/assets/skins/sam/container.css");}
var js="";js+=hasJson?"":(js?"&":"")+baseYuiPath+"json/json-min.js";js+=hasConnect?"":(js?"&":"")+baseYuiPath+"connection/connection-min.js";js+=hasDialog?"":(js?"&":"")+baseYuiPath+"container/container-min.js";addJs(comboHostBasePath+js);}
setTimeout(function(){checkYui(true);},100);}};if(typeof args.resolveDependencies==="undefined"||args.resolveDependencies)
{checkYui();}};var authWindow,credstoreErrorUris={"450":"http://l.yimg.com/kx/ds/html/error_450.html","424":"http://l.yimg.com/kx/ds/html/error_424.html"};var initAuthWindow=function(){authWindow=window.open("","disclosures_auth_flow","modal=yes,width=804,height=507,scrollbars=yes");};var initAuthorizationFlow=function(response,isOverlay){var resp=response.responseText.replace(/<!(?:--[\s\S]*?--\s*)?>\s*/g,'');var r=YAHOO.lang.JSON.parse(resp),cfg=response.argument;if(r.errorCode){if(credstoreErrorUris[r.errorCode]){authWindow.location=credstoreErrorUris[r.errorCode]+"?lang="+cfg.lang;}else{authWindow.location=credstoreErrorUris['424']+"?lang="+
cfg.lang;}}else if(r.results&&r.results.authorizeURL){var authorizeUrl=r.results.authorizeURL;authWindow.location=authorizeUrl;var authWindowPollInterval=500;var checkAuthWindowClosed=YAHOO.lang.later(authWindowPollInterval,null,function(){if(authWindow.closed){checkAuthWindowClosed.cancel();YAHOO.lang.later(250,this,Manager.updateAllInstances);Manager.executePostLinkCallbacks();}},null,true);}else{authWindow.location=credstoreErrorUris['424']+"?lang="+
cfg.lang;}
authWindow.focus();};var initOverlayAuthorizationFlow=function(response){initAuthorizationFlow(response,true);};var getTooltipKnob=function(){var yud=YAHOO.util.Dom,c=yud.getElementsByClassName("disc-tooltip-knob","div");if(c&&c[0]){return c[0];}else{var el=document.createElement("div");yud.addClass(el,"disc-tooltip-knob");var b=document.getElementsByTagName("body")[0];b.appendChild(el);return el;}};var initInlinePerms=function(desCfg,gCfg){var yue=YAHOO.util.Event,yud=YAHOO.util.Dom,ywo=YAHOO.widget.Overlay,yuc=YAHOO.util.connect,meta=desCfg['inlinePermInfo'];var permOverlay=new ywo(meta['ovlyId'],{"context":[desCfg['imageId'],"tl","bl"],"zIndex":99});permOverlay.render(meta['conId']);var showInlinePermMenu=function(e){yud.removeClass(meta['ovlyId'],"disc-hide");permOverlay.show();permOverlay.align('tl','bl');yue.addListener(document,"click",hideInlinePermMenu);yue.stopEvent(e);};var hideInlinePermMenu=function(){permOverlay.hide();yue.removeListener(document,"click",hideInlinePermMenu);};yue.addListener(meta['actId'],"click",showInlinePermMenu);yue.addListener(meta['evId'],"click",function(){yud.get(meta['inputId']).value='PUB';YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{success:function(){yud.addClass(meta['evId'],"selected");yud.removeClass(meta['connId'],"selected");hideInlinePermMenu();yud.get(desCfg['inputId']).checked=true;Manager.syncOtherInstances(gCfg.id);}},"source="+gCfg.source+"&type="+gCfg.type+"&message="+gCfg.message+"&mod_synd_cons=PUB"+"&dest=100"+"&"+gCfg.crumbName+"="+gCfg.crumb);});yue.addListener(meta['connId'],"click",function(){yud.get(meta['inputId']).value='CXN';YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{success:function(){yud.addClass(meta['connId'],"selected");yud.removeClass(meta['evId'],"selected");hideInlinePermMenu();yud.get(desCfg['inputId']).checked=true;Manager.syncOtherInstances(gCfg.id);}},"source="+gCfg.source+"&type="+gCfg.type+"&message="+gCfg.message+"&mod_synd_cons=CXN"+"&dest=100"+"&"+gCfg.crumbName+"="+gCfg.crumb);});};var initEventListeners=function(config){var cfg=config,yue=YAHOO.util.Event,yud=YAHOO.util.Dom,ywo=YAHOO.widget.Overlay,dests=cfg.destinations,ttCollection=[];for(var i=0,l=dests.length;i<l;i++){var d=dests[i];var ua=YAHOO.env.ua;if(ua.ie&&(ua.ie<8)){yud.setAttribute(yud.get(d["imageId"]),"alt","");}
var ttid="disc_tooltip_"+d['imageId'],tt=new ywo(ttid,{visible:false});tt.setBody('<div class="disc-tooltip"><div>'+
d['ttTxt']+'</div></div>');tt.render(document.body);ttCollection[i]=tt;var ttHideTimer;var showTooltip=(function(){var ttl=tt;var ctxid=d['imageId'];return function(){if(ttHideTimer){ttHideTimer.cancel();}
for(var j=0,k=ttCollection.length;j<k;j++){var c=ttCollection[j];if(ttl!=c){c.hide();}}
var context=yud.get(ctxid),ctxRegion=yud.getRegion(context),targetXY=[(ctxRegion.left-20),(ctxRegion.bottom+8)];yud.setStyle(ttl.element,'left',targetXY[0]+"px");yud.setStyle(ttl.element,'top',targetXY[1]+"px");ttl.cfg.setProperty("zIndex",getMaxZindex()+2);showAndPositionTooltipKnob(ttl,[ctxRegion.left,ctxRegion.bottom]);ttl.show();};})();yue.addListener(d['imageId'],'mouseover',showTooltip);yue.addListener(ttid,'mouseover',showTooltip);var hideTooltip=(function(){var ttl=tt;return function(){ttHideTimer=YAHOO.lang.later(1,ttl,function(){yud.setStyle(getTooltipKnob(),"display","none");ttl.hide();});};})();yue.addListener(d['imageId'],'mouseout',hideTooltip);yue.addListener(ttid,'mouseout',hideTooltip);if(d.state==='ENABLED'||d.state==='DISABLED'){yue.addListener(d['inputId'],'click',function(){var dCfg=d;return function(e){var successHandler=function(){Manager.syncOtherInstances(cfg.id);};if(dCfg['dest']==YAHOO_DEST_ID){var t=this,constraint=t.checked?'PUB':'PRIVATE',inlineCfg=dCfg['inlinePermInfo'];successHandler=function(){if(t.checked){yud.addClass(inlineCfg['evId'],"selected");yud.removeClass(inlineCfg['connId'],"selected");}else{yud.removeClass(inlineCfg['evId'],"selected");yud.removeClass(inlineCfg['connId'],"selected");}
Manager.syncOtherInstances(cfg.id);};YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{success:successHandler},"source="+cfg.source+"&type="+cfg.type+"&message="+cfg.message+"&mod_synd_cons="+constraint+"&dest="+dCfg['dest']+"&"+cfg.crumbName+"="+cfg.crumb);}else{var status=this.checked?'ENABLED':'DISABLED';YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{success:successHandler},"source="+cfg.source+"&type="+cfg.type+"&message="+cfg.message+"&mod_synd_stat="+status+"&dest="+dCfg['dest']+"&"+cfg.crumbName+"="+cfg.crumb);}};}());}
if(d.state==='UNLINKED'){yue.addListener(d['upsellLinkId'],'click',function(){var initEndPoint=d['initEndPoint'];var destinationId=d['dest'];return function(e){initAuthWindow();YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{'success':initAuthorizationFlow,'argument':cfg},"initRestApiUrl="+initEndPoint+"&"+cfg.crumbName+"="+cfg.crumb+"&destId="+destinationId+"&lang="+cfg.lang+"&message="+cfg.message);};}());yue.addListener(d['upsellLinkId'],'mouseover',showTooltip);yue.addListener(d['upsellLinkId'],'mouseout',hideTooltip);}
if(d['dest']==YAHOO_DEST_ID){initInlinePerms(d,cfg);}}};var yuiDependenciesAttached=false,yuiDependenciesLoaded=false;var loadYuiDependencies=function(cb){var hasConnect=YAHOO.env.modules.connection?true:false,hasJson=YAHOO.env.modules.json?true:false,hasDialog=YAHOO.env.modules.container?true:false;if(hasConnect&&hasJson&&hasDialog){cb();}else{if(!yuiDependenciesAttached){var baseYuiPath="yui/2.6.0/build/",comboHostBasePath="http://l.yimg.com/d/combo?";if(!hasDialog){addCss(comboHostBasePath+baseYuiPath+"container/assets/skins/sam/container.css");}
var js="";js+=hasConnect?"":(js?"&":"")+baseYuiPath+"connection/connection-min.js";js+=hasJson?"":(js?"&":"")+baseYuiPath+"json/json-min.js";js+=hasDialog?"":(js?"&":"")+baseYuiPath+"container/container-min.js";addJs(comboHostBasePath+js);yuiDependenciesAttached=true;}
setTimeout(function(){loadYuiDependencies.call(null,cb);},100);}}
var initFromRenderedConfig=function(){if(!YAHOO.Updates||!YAHOO.Updates.DiscConfig){return;}
loadYuiDependencies(function(){var dc=YAHOO.Updates.DiscConfig;for(var i in dc){if(YAHOO.lang.hasOwnProperty(dc,i)){var cfg=YAHOO.Updates.DiscConfig[i];Manager.initRenderedInstance(cfg);}}});};YAHOO.util.Event.addListener(window,'load',initFromRenderedConfig);var Manager=function(){var instanceConfigs=[];var postLinkCallbacks=[];var registerPostLinkCallback=function(cbInfo){postLinkCallbacks[postLinkCallbacks.length]=cbInfo;};var executePostLinkCallbacks=function(){var i,l,cbInfo;for(i=0,l=postLinkCallbacks.length;i<l;i++){cbInfo=postLinkCallbacks[i];if(typeof(cbInfo.fn)=="function"){cbInfo.fn.call(cbInfo.scope,cbInfo.obj);}}};var initRenderedInstance=function(cfg){loadYuiDependencies(function(){var c=YAHOO.lang.JSON.parse(cfg);instanceConfigs[instanceConfigs.length]=c;initEventListeners(c);});};var addInstance=function(){};var updateInstance=function(c){var cb=function(response){var r=YAHOO.lang.JSON.parse(response.responseText),yud=YAHOO.util.Dom,discContainer=yud.get(c['containerId']),jsConfig=YAHOO.lang.JSON.parse(r.js_config);var ancestor=yud.getAncestorByTagName(discContainer,"div");ancestor.innerHTML=r.html;initEventListeners(jsConfig);};YAHOO.util.Connect.asyncRequest('POST',PROXY_URL,{success:cb},"fetchInlineMarkupAndConfig=true"+"&source="+c.source+"&type="+c.type+"&lang="+c.lang+"&id="+c.id+"&message="+c.message+"&"+c.crumbName+"="+c.crumb);};var updateAllInstances=function(){for(var i=0,l=instanceConfigs.length;i<l;i++){updateInstance(instanceConfigs[i]);}};var syncOtherInstances=function(id){for(var i=0,l=instanceConfigs.length;i<l;i++){var c=instanceConfigs[i];if(c.id!=id){updateInstance(c);}}};return{initRenderedInstance:initRenderedInstance,syncOtherInstances:syncOtherInstances,updateAllInstances:updateAllInstances,addInstance:addInstance,registerPostLinkCallback:registerPostLinkCallback,executePostLinkCallbacks:executePostLinkCallbacks};}();return{manager:Manager,showDialog:show,getDialog:getDialog,destroyDialog:destroyDialog,getXmlNodeValue:getXmlNodeValue,createNode:createNode,addCss:addCss,addJs:addJs,initFromRenderedConfig:initFromRenderedConfig,version:1.0};}();YUI($g_loader_config).use("blog-config","node","substitute","io-base","json-parse",function(Y){var Disclosure=YAHOO.Updates.Disclosure.manager;Disclosure.registerPostLinkCallback({"fn":function(o){var loader=o.loader;var panelUrl='';if(Y.one('#newsubspt'))
panelUrl=Y.one('.add_subscription').getAttribute('href');else if(Y.one('#blog-relationship-popup'))
panelUrl=Y.one('#addtofriends_ctn a').getAttribute('href');function panelClickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()==="span"){target=target.parentNode;}
var cName=target.className;switch(cName){case"btn_save":YAHOO.util.Event.stopEvent(e);var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];loader.load({method:"POST",form:formEl,url:formEl.action,data:"act=save",isReload:true});break;case"btn_close":YAHOO.util.Event.stopEvent(e);loader.clear();break;}}
if(Y.one('#newsubspt')||Y.one('#blog-relationship-popup')){loader.clear();loader.clickHandler=panelClickHandler;loader.load({url:panelUrl});}else{this.location.reload();}},"scope":this,"obj":{loader:YAHOO.Blog.dialogueLoader}});});
(function(){var isIE6=false;if(YAHOO.env.ua.ie==6){var YUE=YAHOO.util.Event,isEditing=false,bd,de,dummyBd;var init=function(){bd=document.body,de=document.documentElement,dummyBd=document.createElement("div");dummyBd.style.position="absolute";dummyBd.style.zIndex=-1;dummyBd.style.top=0;dummyBd.style.left=0;dummyBd.style.backgroundImage=bd.currentStyle.backgroundImage;dummyBd.style.backgroundColor=bd.currentStyle.backgroundColor;dummyBd.style.visibility="hidden";bd.appendChild(dummyBd);};var coverBg=function(){if(!isEditing){bd.runtimeStyle.backgroundColor="#fff";bd.runtimeStyle.backgroundImage="none";dummyBd.style.width=de.scrollWidth;dummyBd.style.height=de.scrollHeight;dummyBd.style.visibility="visible";isEditing=true;}};var resetBg=function(){if(isEditing){bd.runtimeStyle.backgroundColor="";bd.runtimeStyle.backgroundImage="";dummyBd.style.height=0;dummyBd.style.visibility="hidden";isEditing=false;}};YUE.on(window,"load",function(){init();YUE.on(bd,"mousedown",resetBg);YUE.on(bd,"keydown",resetBg);});}
var g_transDotImage=YAHOO.Blog.Config.Url.YIMG+"/i/global/trans_dot.gif";var g_toolbarChoice={'f':"fontface",'v':"fontsize",'b':"bold",'i':"italic",'u':"underline",'h':"link",'g':"image",'s':"smiley",'t':"textcolor",'c':"highlightcolor",'p':"align",'l':"list",'I':"indent",'O':"outdent"};var g_fontFaceChoice={"arial":{"label":"Arial","value":"Arial,Helvetica,sans-serif"},"courier":{"label":"Courier","value":"Courier New,Courier,mono"},"comic":{"label":"Comic Sans","value":"Comic Sans MS"},"georgia":{"label":"Georgia","value":"Georgia"},"lucida":{"label":"Lucida","value":"Lucida Sans Unicode,Lucida Grande"},"times":{"label":"Times","value":"Times New Roman,Times, serif"},"trebuchet":{"label":"Trebuchet","value":"Trebuchet MS"},"verdana":{"label":"Verdana","value":"Verdana"}};var g_fontSizeChoice={"smaller":1,"small":2,"medium":3,"large":5,"larger":6};var g_alignChoice={"justifyleft":YAHOO.Blog.Config.Url.YIMG+"/i/icon/16/tb_justleft_1.gif","justifycenter":YAHOO.Blog.Config.Url.YIMG+"/i/icon/16/tb_justctr_1.gif","justifyright":YAHOO.Blog.Config.Url.YIMG+"/i/icon/16/tb_justright_1.gif"};var g_listChoice={'insertorderedlist':YAHOO.Blog.Config.Url.YIMG+"/i/icon/16/tb_listnum_1.gif",'insertunorderedlist':YAHOO.Blog.Config.Url.YIMG+"/i/icon/16/tb_listblt_1.gif"};var g_smileyChoice=[YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/1.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/2.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/3.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/4.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/5.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/6.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/7.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/8.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/9.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/10.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/11.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/12.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/13.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/14.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/15.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/16.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/17.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/18.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/19.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/20.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/21.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/22.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/23.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/24.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/25.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/26.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/27.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/28.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/29.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/30.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/31.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/32.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/33.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/34.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/35.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/36.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/37.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/38.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/39.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/40.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/41.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/42.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/43.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/44.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/45.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/46.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/47.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/48.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/49.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/50.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/51.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/52.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/53.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/54.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/55.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/56.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/57.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/58.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/59.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/60.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/61.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/62.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/63.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/64.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/65.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/66.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/67.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/68.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/69.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/70.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/71.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/72.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/73.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/74.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/75.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/76.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/77.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/78.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/79.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/100.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/101.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/102.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/103.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/104.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/105.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/106.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/107.gif',YAHOO.Blog.Config.Url.YIMG+'/i/icon/16/108.gif'];var g_cswatch=['000000','111111','2d2d2d','434343','5b5b5b','737373','8b8b8b','a2a2a2','b9b9b9','d0d0d0','e6e6e6','ffffff','7f7f00','bfbf00','ffff00','ffff40','ffff80','ffffbf','525330','898a49','aea945','c3be71','e0dcaa','fcfae1','407f00','60bf00','80ff00','a0ff40','c0ff80','dfffbf','3b5738','668f5a','7f9757','8a9b55','b7c296','e6ebd5','007f40','00bf60','00ff80','40ffa0','80ffc0','bfffdf','033d21','438059','7fa37c','8dae94','acc6b5','ddebe2','007f7f','00bfbf','00ffff','40ffff','80ffff','bfffff','033d3d','347d7e','609a9f','96bdc4','b5d1d7','e2f1f4','00407f','0060bf','0080ff','40a0ff','80c0ff','bfdfff','1b2c48','385376','57708f','7792ac','a8bed1','deebf6','00007f','0000bf','0000ff','4040ff','8080ff','bfbfff','212143','373e68','444f75','585e82','8687a4','d2d1e1','40007f','6000bf','8000ff','a040ff','c080ff','dfbfff','302449','54466f','655a7f','726284','9e8fa9','dcd1df','7f007f','bf00bf','ff00ff','ff40ff','ff80ff','ffbfff','4a234a','794a72','936386','9d7292','c0a0b6','ecdae5','7f003f','bf005f','ff007f','ff409f','ff80bf','ffbfdf','451528','823857','a94a76','bc6f95','d8a5bb','f7dde9','800000','c00000','ff0000','ff4040','ff8080','ffc0c0','441415','82393c','aa4d4e','bc6e6e','d8a3a4','f8dddd','7f3f00','bf5f00','ff7f00','ff9f40','ffbf80','ffdfbf','482c1b','855a40','b27c51','c49b71','e1c4a8','fdeee0'];var g_defaultLabel={'f':"Font Face",'v':"Font Size",'b':"Bold Face",'i':"Italic",'u':"Underline",'h':"Insert Link",'g':"Insert Image",'s':"Insert Smiley",'t':"Text Color",'c':"Highlight Color",'p':"Text Alignment",'l':"List",'I':"Increase Indent",'O':"Decrease Indent","smaller":"Smaller","small":"Small","medium":"Medium","large":"Large","larger":"Larger","justifyleft":"Left Justify","justifycenter":"Center","justifyright":"Right Justify",'insertorderedlist':"Numbered List",'insertunorderedlist':"Bulleted List",'linktext':"Link Text: ",'linkurl':"Link URL: ",'imageurl':"Image URL: "};var g_defaultTagReplace=[[/<b>(.*?)<\/.>/gm,"<strong>$1</strong>"],[/<i>(.*?)<\/.>/gm,"<em>$1</em>"],[/<P>(.*?)<\/P>/gm,"<p>$1</p>"],[/<A (.*?)<\/A>/gm,"<a $1</a>"],[/<img (.*?)>/gm,"<img $1 alt=\"Image\" />"],[/<p align=center>(.*?)<\/p>/gm,"<div style=\"text-align:center;\">$1</div>"],[/<p align=right>(.*?)<\/p>/gm,"<div style=\"text-align:right;\">$1</div>"],[/<span style="font-weight: normal[; ]*">(.*?)<\/span>/gm,"$1"],[/<span style="font-weight: bold[; ]*">(.*?)<\/span>/gm,"<strong>$1</strong>"],[/<span style="font-style: italic[; ]*">(.*?)<\/span>/gm,"<em>$1</em>"],[/<span style="text-decoration: underline[; ]*">(.*?)<\/span>/gm,"<u>$1</u>"],[/<span style="(font-weight: bold;[? ]*|font-style: italic[; ]*){2}">(.*?)<\/span>/gm,"<strong><em>$2</em></strong>"],[/<span style="(font-weight: bold[; ]*|text-decoration: underline[; ]*){2}">(.*?)<\/span>/gm,"<strong><u>$2</u></strong>"],[/<span style="(font-style: italic[; ]*|text-decoration: underline[; ]*){2}">(.*?)<\/span>/gm,"<em><u>$2</u></em>"],[/<span style="(font-weight: bold[; ]*|font-style: italic[; ]*|text-decoration: underline[; ]*){3}">(.*?)<\/span>/gm,"<strong><em><u>$2</u></em></strong>"],[/<([a-z]+) style="font-weight: normal[; ]*">(.*?)<\/[a-z]+>/gm,"<$1>$2</$1>"],[/<([a-z]+) style="font-weight: bold[; ]*">(.*?)<\/[a-z]+>/gm,"<$1><strong>$2</strong></$1>"],[/<([a-z]+) style="font-style: italic[; ]*">(.*?)<\/[a-z]+>/gm,"<$1><em>$2</em></$1>"],[/<([a-z]+) style="text-decoration: underline[; ]*">(.*?)<\/[a-z]+>/gm,"<$1><u>$2</u></$1>"],[/<([a-z]+) style="(font-weight: bold[; ]*|font-style: italic[; ]*){2}">(.*?)<\/[a-z]+>/gm,"<$1><strong><em>$3</em></strong></$1>"],[/<([a-z]+) style="(font-weight: bold[; ]*|text-decoration: underline[; ]*){2}">(.*?)<\/[a-z]+>/gm,"<$1><strong><u>$3</u></strong></$1>"],[/<([a-z]+) style="(font-style: underline[; ]*|text-decoration: underline[; ]*){2}">(.*?)<\/[a-z]+>/gm,"<$1><em><u>$3</u></em></$1>"],[/<([a-z]+) style="(font-weight: bold[; ]*|font-style: italic[; ]*|text-decoration: underline[; ]*){3}">(.*?)<\/[a-z]+>/gm,"<$1><strong><em><u>$3</u></em></strong></$1>"],[/<br>[\s]*/g,"<br />\n"],[/<\/p>[\s]*/g,"</p>\n"]];var g_defaultFontFace="Arial";var g_defaultFontSize=3;var g_defaultTextAlign='justifyleft';function htmlEntityDecode(str){var textarea=document.createElement("textarea");textarea.innerHTML=str;return textarea.value;}
function tagReplace(html,tags){html=html.replace(/(<.*?>)/g,function(match){return match.toLowerCase();});for(var i=0;i<tags.length;i++){html=html.replace(tags[i][0],tags[i][1]);}
return html;}
YAHOO.widget.RTE=function(name,formId,panelId,order){this.init(name,formId,panelId,order);};YAHOO.widget.RTE.prototype={m_name:null,m_form:null,m_panel:null,m_order:'',m_toolbar:null,m_editor:null,m_srcEditor:null,m_currentAction:null,m_label:null,m_tagReplace:null,m_paletteMap:[],init:function(name,formId,panelId,order){this.m_name=name;this.m_form=YAHOO.util.Dom.get(formId);this.m_panel=YAHOO.util.Dom.get(panelId);if(!this.m_panel){throw new Error('RTE panel not defined');}
if(this.m_form){YAHOO.util.Event.addListener(this.m_form,"submit",this.submitContent,this,true);}
this.m_order=order;this.m_label=[];},render:function(){this.renderToolbar();this.renderEditor();this.initToolbar();this.initEditor();this.fixSize();},hideAllPalettes:function(){YAHOO.util.Event.removeListener(document,"keyup",this.hideAllPalettes);YAHOO.util.Event.removeListener(document,"click",this.hideAllPalettes);var contentWindow=this.m_editor.contentWindow;YAHOO.util.Event.removeListener(contentWindow.document,"keyup",this.hideAllPalettes);YAHOO.util.Event.removeListener(contentWindow.document,"click",this.hideAllPalettes);contentWindow.focus();for(var palette in this.m_paletteMap){YAHOO.util.Dom.setStyle(this.m_paletteMap[palette],"visibility",'hidden');}},getHTML:function(){var contentWindow=this.m_editor.contentWindow;if(YAHOO.util.Dom.getStyle(this.m_srcEditor,"display")!="none"){contentWindow.document.body.innerHTML=this.m_srcEditor.value;}
var html=contentWindow.document.body.innerHTML;if(this.m_tagReplace){html=tagReplace(html,this.m_tagReplace);}
return html;},setHTML:function(html){var contentWindow=this.m_editor.contentWindow;if(!contentWindow.document.body){var thisObj=this;var timeoutFunc=function(){thisObj.setHTML(html);}
setTimeout(timeoutFunc,200);return;}
contentWindow.document.body.innerHTML=html;if(YAHOO.util.Dom.getStyle(this.m_srcEditor,"display")!="none"){this.m_srcEditor.value=html;}},insertHTML:function(html,range){var contentWindow=this.m_editor.contentWindow;contentWindow.focus();if(!range){range=this.getSelectionRange();}
if(document.all){range.pasteHTML(html);}else{var fragment=range.createContextualFragment(html);var node=fragment.firstChild;range.deleteContents();range.insertNode(fragment);range.selectNodeContents(node);}
range.collapse(false);},editSource:function(){if(this.m_editor.parentNode.style.height==""){this.fixSize();}
this.m_srcEditor.value=this.getHTML();YAHOO.util.Dom.setStyle(this.m_toolbar.parentNode,"display","none");YAHOO.util.Dom.setStyle(this.m_editor.parentNode,"display","none");YAHOO.util.Dom.setStyle(this.m_srcEditor,"display","block");this.m_srcEditor.focus();},editHTML:function(){var contentWindow=this.m_editor.contentWindow;contentWindow.document.body.innerHTML=this.getHTML();YAHOO.util.Dom.setStyle(this.m_toolbar.parentNode,"display","block");YAHOO.util.Dom.setStyle(this.m_editor.parentNode,"display","block");YAHOO.util.Dom.setStyle(this.m_srcEditor,"display","none");contentWindow.focus();},toggleEditor:function(){if(YAHOO.util.Dom.getStyle(this.m_srcEditor,"display")=="none"){this.editSource();}else{this.editHTML();}},setLabel:function(key,value){this.m_label[key]=value;},setAllLabels:function(labels){this.m_label=labels;},setTagReplace:function(doTagReplace,tagReplace){if(doTagReplace){if(!tagReplace){this.m_tagReplace=g_defaultTagReplace;}else{this.m_tagReplace=tagReplace;}}else{this.m_tagReplace=null;}},renderToolbar:function(){var strHTML="<span class='rte_btn' unselectable='on'>";for(var i=0;i<this.m_order.length;i++){var option=this.m_order.charAt(i);if(g_toolbarChoice[option]){var id=this.m_name+"_"+g_toolbarChoice[option];strHTML+="<img title='"+this.getLabel(option)+"' ";strHTML+="id='"+id+"' ";strHTML+="src='"+g_transDotImage+"' class='rte_btn_"+g_toolbarChoice[option]+"' ";strHTML+="unselectable='on'>";}else if(option=='|'){strHTML+="<img class='rte_btn_sep' src='"+g_transDotImage+"'>";}}
strHTML+="</span>";var container=document.createElement("div");container.className="rte_container";this.m_toolbar=document.createElement("div");this.m_toolbar.id=this.m_name+"_toolbar";this.m_toolbar.className="rte_toolbar";this.m_toolbar.innerHTML=strHTML;container.appendChild(this.m_toolbar);this.m_panel.appendChild(container);for(var i=0;i<this.m_order.length;i++){var option=this.m_order.charAt(i);if(g_toolbarChoice[option]){var id=this.m_name+"_"+g_toolbarChoice[option];YAHOO.util.Event.addListener(id,"dragstart",YAHOO.util.Event.stopEvent,YAHOO.util.Event,true);YAHOO.util.Event.addListener(id,"mouseover",this.btnMouseOver,this);YAHOO.util.Event.addListener(id,"mouseout",this.btnMouseOut,this);YAHOO.util.Event.addListener(id,"mousedown",this.btnMouseDown,this);YAHOO.util.Event.addListener(id,"mouseup",this.btnMouseOver,this);YAHOO.util.Event.addListener(id,"click",this.performAction,this);}}},initToolbar:function(){var buttons=YAHOO.util.Dom.getElementsBy(function(el){return true;},'img',this.m_toolbar);for(var i=0;i<buttons.length;i++){buttons[i].origClass=buttons[i].className;}},renderEditor:function(){this.m_editor=document.createElement("iframe");this.m_editor.id=this.m_name+"_editor";this.m_editor.className="rte_editor";var container=document.createElement("div");container.className="rte";container.appendChild(this.m_editor);this.m_panel.appendChild(container);var html="<html>";html+="<head>";html+="<style>";html+="body { background: #fff; font-family: "+g_defaultFontFace+"; margin: 2px;}";html+="</style>";html+="</head>";html+="<body></body>";html+="</html>";var contentWindow=this.m_editor.contentWindow;contentWindow.document.open();contentWindow.document.write(html);contentWindow.document.close();this.m_srcEditor=document.createElement("textarea");this.m_srcEditor.id=this.m_name+"_src_editor";this.m_srcEditor.className="rte_src_editor";YAHOO.util.Dom.setStyle(this.m_srcEditor,"display","none");this.m_panel.appendChild(this.m_srcEditor);},initEditor:function(){var contentWindow=this.m_editor.contentWindow;contentWindow.document.designMode="on";YAHOO.util.Event.addListener(contentWindow.document,"mouseup",this.setToolbarStatus,this,true);YAHOO.util.Event.addListener(contentWindow.document,"keyup",this.editorKeyUp,this);if(YAHOO.env.ua.ie==6){YAHOO.util.Event.addListener(contentWindow.document,"click",coverBg);YAHOO.util.Event.addListener(contentWindow.document,"keydown",coverBg);}},fixSize:function(){var region=YAHOO.util.Dom.getRegion(this.m_panel);var height=parseInt(region.bottom,10)-parseInt(region.top,10)-6;var width=parseInt(region.right,10)-parseInt(region.left,10)+1;if((isNaN(height))||(typeof(height)!="number")||height<0)height=194;YAHOO.util.Dom.setStyle(this.m_srcEditor,"height",height+"px");region=YAHOO.util.Dom.getRegion(this.m_toolbar);height-=parseInt(region.bottom,10)-parseInt(region.top,10)+2;if((isNaN(height))||(typeof(height)!="number"))height=161;YAHOO.util.Dom.setStyle(this.m_editor.parentNode,"height",height+"px");},submitContent:function(event){if(this.m_editor){var html=this.getHTML();var id=this.m_name+"_value";var field=YAHOO.util.Dom.get(id);if(!field){field=document.createElement('input');field.type='hidden';field.id=id;field.name=id;this.m_form.appendChild(field);}
field.value=html;if(typeof rt_Start==='function'){rt_SetSpaceid(1171550094);rt_Start();}}},btnMouseOver:function(event,rte){if(!rte.isTextStyleButton(this)||(this.className.indexOf(' ')==-1)){this.className='rte_btn_over '+this.origClass;}},btnMouseOut:function(event,rte){if(!rte.isTextStyleButton(this)||(this.className.indexOf('rte_btn_down')==-1)){this.className=this.origClass;}},btnMouseDown:function(event,rte){if(rte.isTextStyleButton(this)&&(this.className.indexOf('rte_btn_down')!=-1)){this.className=this.origClass;}else{this.className='rte_btn_down '+this.origClass;}},performAction:function(event,rte){YAHOO.util.Event.stopEvent(event);rte.hideAllPalettes();var id=this.id.substring(rte.m_name.length+1);rte.m_currentAction=id;switch(id){case'fontface':rte.showPalette(this,'p_fontface',rte.getFontFacePaletteHTML,rte.setupFontFace);break;case'fontsize':rte.showPalette(this,'p_fontsize',rte.getFontSizePaletteHTML,rte.setupFontSize);break;case'smiley':rte.showPalette(this,'p_smiley',rte.getSmileyPaletteHTML,rte.setupSmiley);break;case'textcolor':case'highlightcolor':rte.showPalette(this,'p_color',rte.getColorPaletteHTML,rte.setupColor);break;case'align':rte.showPalette(this,'p_align',rte.getAlignPaletteHTML,rte.setupAlign);break;case'list':rte.showPalette(this,'p_list',rte.getListPaletteHTML,rte.setupList);break;case'link':rte.showPalette(this,'p_link',rte.getLinkPaletteHTML,rte.setupInsertLink,true);break;case'image':rte.showImageLoader(this);break;default:rte.execCommand(id,false,null);}},changeFontFace:function(event,rte){var id=this.id.substring(rte.m_name.length+4);rte.execCommand("FontName",false,g_fontFaceChoice[id]["value"]);},changeFontSize:function(event,rte){var id=this.id.substring(rte.m_name.length+4);rte.execCommand("FontSize",false,g_fontSizeChoice[id]);},insertSmiley:function(event,rte){var src=g_smileyChoice[this.id.substring(rte.m_name.length+4)];rte.execCommand('InsertImage',false,src);},changeColor:function(event,rte){var command='hilitecolor';if(rte.m_currentAction=='textcolor'){command='forecolor';}else if(document.all){command='backcolor';}
var color=this.id.substring(rte.m_name.length+4);rte.execCommand(command,false,color);},changeTextAttribute:function(event,rte){var command=this.id.substring(rte.m_name.length+4);rte.execCommand(command,false,null);},insertLink:function(event,rte){var contentWindow=rte.m_editor.contentWindow;var node=YAHOO.util.Dom.get(rte.m_name+"_f_link");var inputText=YAHOO.util.Dom.get(rte.m_name+"_f_linktext");var inputUrl=YAHOO.util.Dom.get(rte.m_name+"_f_linkurl");YAHOO.util.Event.removeListener(node,"keyup",YAHOO.util.Event.stopEvent);YAHOO.util.Event.removeListener(node,"click",YAHOO.util.Event.stopEvent);rte.hideAllPalettes();contentWindow.focus();if(node.selectedRange.select){node.selectedRange.select();}
inputUrl.value=inputUrl.value.replace(/^\s+|\s+$/g,"");if((this.id==(rte.m_name+"_f_linkcancel"))||(inputUrl.value.length<=0)){return;}
if(this.id==(rte.m_name+"_f_linkremove")){inputText.disabled=false;inputText.value=node.linkNode.innerHTML;var style=node.linkNode.getAttribute("style",2);if(style){inputText.value="<span style='"+style+"'>"+inputText.value+"</span>";}
node.linkNode.parentNode.removeChild(node.linkNode);}
if(!inputText.disabled){if(inputText.value.length>0){var html=inputText.value;if(this.id==(rte.m_name+"_f_linkok")){html="<a href='"+inputUrl.value+"'>"+html+"</a>";}
rte.insertHTML(html,node.selectedRange);}}else{rte.execCommand("CreateLink",false,inputUrl.value);}
contentWindow.focus();},insertImage:function(event,rte){rte.hideAllPalettes();var node=YAHOO.util.Dom.get(rte.m_name+"_f_image");var contentWindow=rte.m_editor.contentWindow;var inputUrl=YAHOO.util.Dom.get(rte.m_name+"_f_imageurl");YAHOO.util.Event.removeListener(node,"keyup",YAHOO.util.Event.stopEvent);YAHOO.util.Event.removeListener(node,"click",YAHOO.util.Event.stopEvent);if(node.selectedRange.select){node.selectedRange.select();}
inputUrl.value=inputUrl.value.replace(/^\s+|\s+$/g,"");if((this.id==(rte.m_name+"_f_imagecancel"))||(inputUrl.value.length<=0)){return;}
contentWindow.document.execCommand("InsertImage",false,inputUrl.value);contentWindow.focus();},editorKeyUp:function(event,rte){var keyCode=event.keyCode;if(event.ctrlKey||event.altKey||((keyCode!=32)&&((keyCode<48)||(keyCode>90))&&((keyCode<96)||(keyCode>111)))){setTimeout(function(){rte.setToolbarStatus();},0);}},getFontFacePaletteHTML:function(){var html="<div class='rte_font'><ul>";for(var id in g_fontFaceChoice){var eid=this.m_name+"_ff_"+id;html+="<li style='font-family: "+g_fontFaceChoice[id]['value']+"'>";html+="<a href='javascript:void(0);' id='"+eid+"'>"+g_fontFaceChoice[id]['label']+"</a>";html+="</li>";}
html+="</ul></div>";return html;},getFontSizePaletteHTML:function(){var html="<div class='rte_font'><ul>";for(var id in g_fontSizeChoice){var eid=this.m_name+"_fs_"+id;html+="<li><font size='"+g_fontSizeChoice[id]+"'>";html+="<a href='javascript:void(0);' id='"+eid+"'>"+this.getLabel(id)+"</a>";html+="</font></li>";}
html+="</ul></div>";return html;},getSmileyPaletteHTML:function(){var smileyColumns=8;var html="<table border='0' cellspacing='0' cellpadding='0' class='rte_smiley'>";for(i=0;i<g_smileyChoice.length;i++){var eid=this.m_name+"_sm_"+i;if((i%smileyColumns)==0){html+="<tr>";}
html+="<td valign='center' align='center'>";html+="<a href='javascript:void(0);' id='"+eid+"'>";html+="<img src='"+g_smileyChoice[i]+"'";html+=" onmouseover='this.style.border=\"1px inset black\";return true;' onmouseout='this.style.border=\"1px solid white\";'>";html+="</a></td>";if(((i+1)%smileyColumns)==0){html+="</tr>";}}
html+="</table>";return html;},getColorPaletteHTML:function(){var colorColumn=12;var html="<table border='0' cellspacing='0' cellpadding='0' class='rte_color'>";for(i=0;i<g_cswatch.length;i++){var eid=this.m_name+"_cs_"+g_cswatch[i];if((i%colorColumn)==0){html+="<tr>";}
html+="<td valign='top' style='background-color: #"+g_cswatch[i]+";'";html+=" onmouseover='this.style.border=\"1px inset black\"; return true;' onmouseout='this.style.border=\"1px solid white\";'>";html+="<a class='colorItem' id='"+eid+"' href='javascript:void(0);'>";html+="<img src='"+YAHOO.Blog.Config.Url.YIMG+"/i/spc.gif' width='12' height='12' border='0'>";html+="</a></td>";if(((i+1)%colorColumn)==0){html+="</tr>";}}
html+="</table>";return html;},getAlignPaletteHTML:function(){var html="<div class='rte_text'><ul>";for(var id in g_alignChoice){var eid=this.m_name+"_ta_"+id;html+="<li>";html+="<a id='"+eid+"' href='javascript:void(0);'>";html+="<img src='"+g_alignChoice[id]+"' border='0' align='absmiddle'>";html+=this.getLabel(id);html+="</a>";html+="</li>";}
html+="</ul></div>";return html;},getListPaletteHTML:function(){var html="<div class='rte_text'><ul>";for(var id in g_listChoice){var eid=this.m_name+"_tl_"+id;html+="<li>";html+="<a id='"+eid+"' href='javascript:void(0);'>";html+="<img src='"+g_listChoice[id]+"' border='0' align='absmiddle'>";html+=this.getLabel(id);html+="</a>";html+="</li>";}
html+="</ul></div>";return html;},getLinkPaletteHTML:function(){var html="<div class='rte_form rte_f_link' id='"+this.m_name+"_f_link'>";html+="<table border='0' cellpadding='0' cellspacing='0'>";html+="<tr>";html+="<th nowrap='true'>"+this.getLabel("linktext")+"</th>";html+="<td><input type='text' class='rte_form_input' id='"+this.m_name+"_f_linktext'></td>";html+="</tr>";html+="<tr>";html+="<th nowrap='true'>"+this.getLabel("linkurl")+"</th>";html+="<td><input type='text' class='rte_form_input' id='"+this.m_name+"_f_linkurl'></td>";html+="</tr>";html+="<tr>";html+="<td colspan='2' align='right'>";html+="<input type='button' id='"+this.m_name+"_f_linkok' class='rte_form_btn button' value='Ok'>";html+="<input type='button' id='"+this.m_name+"_f_linkcancel' class='rte_form_btn button' value='Cancel'>";html+="<input type='button' id='"+this.m_name+"_f_linkremove' class='rte_form_btn button' value='Remove'>";html+="</td>";html+="</tr>";html+="</table>";html+="</div>";return html;},getImagePaletteHTML:function(){var html="<div class='rte_form' id='"+this.m_name+"_f_image'>";html+="<table border='0' cellpadding='0' cellspacing='0'>";html+="<tr>";html+="<th nowrap='true'>"+this.getLabel("imageurl")+"</th>";html+="<td><input type='text' class='rte_form_input' id='"+this.m_name+"_f_imageurl'></td>";html+="</tr>";html+="<tr>";html+="<td colspan='2' align='right'>";html+="<input type='button' id='"+this.m_name+"_f_imageok' class='rte_form_btn' value='Ok'>";html+="<input type='button' id='"+this.m_name+"_f_imagecancel' class='rte_form_btn' value='Cancel'>";html+="</td>";html+="</tr>";html+="</table>";html+="</div>";YAHOO.util.Event.addListener(this.m_name+"_f_imageok","click",this.insertImage,this);YAHOO.util.Event.addListener(this.m_name+"_f_imagecancel","click",this.insertImage,this);return html;},setupFontFace:function(){var contentWindow=this.m_editor.contentWindow;var face=contentWindow.document.queryCommandValue('FontName');if(!face){face=g_defaultFontFace;}
var found=false;for(var id in g_fontFaceChoice){node=YAHOO.util.Dom.get(this.m_name+"_ff_"+id);if(face&&(g_fontFaceChoice[id]["value"].indexOf(face)!=-1)){node.className='rte_selected';found=true;}else{node.className='';}
var eid=this.m_name+"_ff_"+id;YAHOO.util.Event.addListener(eid,'click',this.changeFontFace,this);}},setupFontSize:function(){var contentWindow=this.m_editor.contentWindow;var size=contentWindow.document.queryCommandValue('FontSize');if(!size){size=g_defaultFontSize;}
var found=false;for(var id in g_fontSizeChoice){node=YAHOO.util.Dom.get(this.m_name+"_fs_"+id);if(size==g_fontSizeChoice[id]){node.className='rte_selected';found=true;}else{node.className='';}
var eid=this.m_name+"_fs_"+id;YAHOO.util.Event.addListener(eid,'click',this.changeFontSize,this);}},setupSmiley:function(){for(i=0;i<g_smileyChoice.length;i++){var eid=this.m_name+"_sm_"+i;YAHOO.util.Event.addListener(eid,'click',this.insertSmiley,this);}},setupColor:function(){for(i=0;i<g_cswatch.length;i++){var eid=this.m_name+"_cs_"+g_cswatch[i];YAHOO.util.Event.addListener(eid,'click',this.changeColor,this);}},setupAlign:function(){var contentWindow=this.m_editor.contentWindow;var found=false;for(var id in g_alignChoice){node=YAHOO.util.Dom.get(this.m_name+"_ta_"+id);if(contentWindow.document.queryCommandState(id)){node.className='rte_selected';found=true;}else{node.className='';}
var eid=this.m_name+"_ta_"+id;YAHOO.util.Event.addListener(eid,'click',this.changeTextAttribute,this);}
if(!found){node=YAHOO.util.Dom.get(this.m_name+"_ta_"+g_defaultTextAlign);node.className='rte_selected';}},setupList:function(){var contentWindow=this.m_editor.contentWindow;for(var id in g_listChoice){node=YAHOO.util.Dom.get(this.m_name+"_tl_"+id);if(contentWindow.document.queryCommandState(id)){node.className='rte_selected';}else{node.className='';}
var eid=this.m_name+"_tl_"+id;YAHOO.util.Event.addListener(eid,'click',this.changeTextAttribute,this);}},setupInsertLink:function(){var range=this.getSelectionRange();var linkNode=this.getCurrentLinkNode();var inputUrl=YAHOO.util.Dom.get(this.m_name+"_f_linkurl");var inputText=YAHOO.util.Dom.get(this.m_name+"_f_linktext");var removeBtn=YAHOO.util.Dom.get(this.m_name+"_f_linkremove");YAHOO.util.Event.addListener(this.m_name+"_f_linkok","click",this.insertLink,this);YAHOO.util.Event.addListener(this.m_name+"_f_linkcancel","click",this.insertLink,this);YAHOO.util.Event.addListener(this.m_name+"_f_linkremove","click",this.insertLink,this);if(linkNode){if(range.selectNodeContents){range.selectNodeContents(linkNode);}else{range.moveToElementText(linkNode);}
inputUrl.value=linkNode.href;}else{inputUrl.value='http://';}
var node=YAHOO.util.Dom.get(this.m_name+"_f_link");node.selectedRange=range;node.linkNode=linkNode;inputText.value=this.getSelectionHTML(range);var replaceFunc=function(){var tag=arguments[0].toLowerCase();if(tag.indexOf("<img")==0){return'[IMAGE]';}
return'';};inputText.value=htmlEntityDecode(inputText.value.replace(/<(.*?)>/g,replaceFunc));if(inputText.value){inputText.disabled=true;inputUrl.focus();}else{inputText.disabled=false;inputText.focus();}
if(linkNode){removeBtn.disabled=false;}else{removeBtn.disabled=true;}},setupInsertImage:function(){var range=this.getSelectionRange();var node=YAHOO.util.Dom.get(this.m_name+"_f_image");node.selectedRange=range;var inputUrl=YAHOO.util.Dom.get(this.m_name+"_f_imageurl");inputUrl.focus();inputUrl.value='http://';},execCommand:function(command,useUI,arg){var contentWindow=this.m_editor.contentWindow;contentWindow.focus();contentWindow.document.execCommand(command,useUI,arg);contentWindow.focus();},showPalette:function(button,name,htmlFunc,setupFunc,stayOpen){if(arguments.length<5){stayOpen=false;}
var pos=YAHOO.util.Dom.getXY(button);pos[1]+=button.offsetHeight;name=this.m_name+"_"+name;if(!this.m_paletteMap[name]){var html=htmlFunc.call(this);var layer=document.createElement("div");layer.id=name;layer.className='rte_palette';layer.innerHTML=html;this.m_panel.appendChild(layer);this.m_paletteMap[name]=layer;}
YAHOO.util.Dom.setXY(this.m_paletteMap[name],pos);YAHOO.util.Dom.setStyle(this.m_paletteMap[name],"visibility",'visible');YAHOO.util.Event.addListener(document,"keyup",this.hideAllPalettes,this,true);YAHOO.util.Event.addListener(document,"click",this.hideAllPalettes,this,true);var contentWindow=this.m_editor.contentWindow;YAHOO.util.Event.addListener(contentWindow.document,"keyup",this.hideAllPalettes,this,true);YAHOO.util.Event.addListener(contentWindow.document,"click",this.hideAllPalettes,this,true);if(stayOpen){YAHOO.util.Event.addListener(this.m_paletteMap[name],"keyup",YAHOO.util.Event.stopEvent,YAHOO.util.Event,true);YAHOO.util.Event.addListener(this.m_paletteMap[name],"click",YAHOO.util.Event.stopEvent,YAHOO.util.Event,true);}
if(setupFunc){setupFunc.call(this);}},isTextStyleButton:function(button){var id=button.id.substring(this.m_name.length+1);return((id=='bold')||(id=='italic')||(id=='underline'));},setToolbarStatus:function(){var contentWindow=this.m_editor.contentWindow;var isBold=contentWindow.document.queryCommandState("bold");var isItalic=contentWindow.document.queryCommandState("italic");var isUnderline=contentWindow.document.queryCommandState("underline");var button=YAHOO.util.Dom.get(this.m_name+"_bold");if(isBold){button.className="rte_btn_down "+button.origClass;}else{button.className=button.origClass;}
button=YAHOO.util.Dom.get(this.m_name+"_italic");if(isItalic){button.className="rte_btn_down "+button.origClass;}else{button.className=button.origClass;}
button=YAHOO.util.Dom.get(this.m_name+"_underline");if(isUnderline){button.className="rte_btn_down "+button.origClass;}else{button.className=button.origClass;}},getCurrentLinkNode:function(){var nodePath=this.getSelectionNodePath();for(var i=0;i<nodePath.length;i++){if(nodePath[i].nodeName.toUpperCase()=='A'){return nodePath[i];}}
return null;},getLabel:function(key){if(this.m_label[key]){return this.m_label[key];}
return g_defaultLabel[key];},getSelectionRange:function(){var contentWindow=this.m_editor.contentWindow;var range=null;if(document.all){var selection=contentWindow.document.selection;if(selection){range=selection.createRange();if(selection.type=='Control'){var control=range.item(0);range=contentWindow.document.body.createTextRange();range.moveToElementText(control);}}}else{var selection=contentWindow.getSelection();range=selection.getRangeAt(selection.rangeCount-1);}
return range;},getSelectionNode:function(range){if(!range){range=this.getSelectionRange();}
var node=null;if(range){if(document.all){node=range.parentElement();}else{node=range.startContainer;if(node.nodeType!=1){node=node.parentNode;}}}
return node;},getSelectionNodePath:function(){var node=this.getSelectionNode();var result=[];while(node){result.push(node);if(node.nodeName.toUpperCase()=="BODY"){break;}
node=node.parentNode;}
return result;},getSelectionText:function(range){if(range){if(document.all){return range.text;}else{return range.toString();}}
return'';},getSelectionHTML:function(range){if(range){if(document.all){return range.htmlText;}else{var div=document.createElement("div");div.appendChild(range.cloneContents());return div.innerHTML;}}
return'';},showImageLoader:function(o){var photoPanelURL=YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_RTE_PHOTO_PANEL;var getPhotoURL=YAHOO.Blog.Config.Url.BLOG+YAHOO.Blog.Config.Url.API_GET_PHOTO;if(document.getElementById('composer')){photoPanelURL=YAHOO.Blog.Config.Url.UPLOADER+YAHOO.Blog.Config.Url.API_RTE_PHOTO_PANEL;getPhotoURL=YAHOO.Blog.Config.Url.UPLOADER+YAHOO.Blog.Config.Url.API_GET_PHOTO;}
var loader=YAHOO.Blog.dialogueLoader;var rte=this;loader.clickHandler=panelClickHandler;loader.load({url:photoPanelURL});var range=this.getSelectionRange();var node=YAHOO.util.Dom.get('dialogue-container');node.selectedRange=range;var photosStartAt=0;function checkFileUploadEl(){var inputArr=loader.dialogueContainer.getElementsByTagName("input");for(var i=0;i<inputArr.length;i+=1){if(inputArr[i].type==="file"){return true;}}
return false;}
function verifyUrl(url)
{if(!url||url==''){return false;}else{return true;}}
function showPhotos(folderSelected,startAt){var callback={success:function(o){if(o.responseXML!==undefined){var root=o.responseXML.documentElement;try{var photoNodes=root.getElementsByTagName('Photo');var html='<ul>';for(var i=0;i<photoNodes.length;i++){var photo={};for(var j=0;j<photoNodes[i].childNodes.length;j++){if(photoNodes[i].childNodes[j].tagName=='Title'){photo.title=photoNodes[i].childNodes[j].firstChild.textContent;if(!photo.title){photo.title=photoNodes[i].childNodes[j].firstChild.text;}}else if(photoNodes[i].childNodes[j].tagName=='Url'){for(var k=0;k<photoNodes[i].childNodes[j].childNodes.length;k++){if(photoNodes[i].childNodes[j].childNodes[k].tagName=='Thumbnail'){photo.thumbnail=photoNodes[i].childNodes[j].childNodes[k].firstChild.textContent;if(!photo.thumbnail){photo.thumbnail=photoNodes[i].childNodes[j].childNodes[k].firstChild.text;}}else if(photoNodes[i].childNodes[j].childNodes[k].tagName=='Normal'){photo.normal=photoNodes[i].childNodes[j].childNodes[k].firstChild.textContent;if(!photo.normal){photo.normal=photoNodes[i].childNodes[j].childNodes[k].firstChild.text;}}else if(photoNodes[i].childNodes[j].childNodes[k].tagName=='Large'){photo.large=photoNodes[i].childNodes[j].childNodes[k].firstChild.textContent;if(!photo.large){photo.large=photoNodes[i].childNodes[j].childNodes[k].firstChild.text;}}}}}
html+='<li><label for="select-from-album-url"><img src="'+photo.thumbnail+'"></label><h4><span>'+
photo.title+'</span><div><input type="radio" id="select-from-album-url"'+' value="'+photo.normal+'" name="select-from-album-url"></div></li>';}
html=html+'</ul>';var totalPhotos=root.getAttribute('total');var numPhotos=root.getAttribute('num');if(numPhotos<totalPhotos){html=html+'<ul class="pagination">';if(startAt>0){html=html+'<li class="previous-photo">Trc  &laquo;</li>';}
var lastStartAt=totalPhotos-(numPhotos%10);if(photosStartAt<lastStartAt){html=html+'<li class="next-photo">Sau &raquo;</li>';}
html=html+'</ul>';}
document.getElementById('select-photo-area').innerHTML=html;YAHOO.util.Dom.removeClass('select-photo-field','hidden');}catch(e){document.getElementById('select-photo-area').innerHTML='Rt tic! C s c xy ra khi ti nh. Xin th li sau';YAHOO.util.Dom.removeClass('select-photo-field','hidden');}}},failure:function(o){alert(YAHOO.Blog.Config.Error.INVALID_STRUCTURE);}}
var photoRetrieveUrl=getPhotoURL+'?fid='+folderSelected+'&start='+startAt;YAHOO.util.Connect.asyncRequest('POST',photoRetrieveUrl,callback);}
function panelClickHandler(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="span"){target=target.parentNode;}
var formEl=loader.dialogueContainer.getElementsByTagName("form")[0];var loadingIndicator=document.getElementById("loading-indicator");var cName=target.className;switch(cName){case"close":case"btn_close":YAHOO.util.Event.stopEvent(e);loader.clear();break;case"btn_save":case"save":if(target.tagName.toLowerCase()=="input"){YAHOO.util.Event.stopEvent(e);if(loadingIndicator){loadingIndicator.style.visibility="visible";}
var fileUpload=checkFileUploadEl();var saveOptions={method:"POST",form:formEl,url:photoPanelURL,data:"act=save",isReload:true,isUploadFile:fileUpload,customReturnCheck:function(o){return true;}}
if(fileUpload){saveOptions['timeout']=120000;}
loader.load(saveOptions);loader.dialogueContainer.innerHTML='<img src="'+YAHOO.Blog.Config.Img.PANEL_LOADING+'">';var height=YAHOO.util.Dom.getDocumentHeight();if(YAHOO.env.ua.ie==6){loader.mask.style.height=loader.dialogueMask.style.height=height+"px";}
loader.overlay.style.height=height+"px";loader.overlay.style.display="block";loader.shim.expand();loader.center();}
break;case"step-next":YAHOO.util.Event.stopEvent(e);loader.load({method:"POST",form:formEl,url:formEl.action,data:"act=next"});break;case"step-prev":YAHOO.util.Event.stopEvent(e);var xhrCfg={method:"POST",form:formEl,url:formEl.preUrl.value,data:"act=prev"};if(document.getElementById('panelaction')&&document.getElementById('panelaction').value=='upload'){xhrCfg.isUploadFile=true;xhrCfg.customReturnCheck=function(o){return true;}}
loader.load(xhrCfg);break;case"select-folder-view":var selectField=document.getElementById('pfid');var folderSelected=selectField.options[selectField.selectedIndex].value;photosStartAt=0;showPhotos(folderSelected,photosStartAt);break;case"previous-photo":var selectField=document.getElementById('pfid');var folderSelected=selectField.options[selectField.selectedIndex].value;photosStartAt=photosStartAt-10;showPhotos(folderSelected,photosStartAt);break;case"next-photo":var selectField=document.getElementById('pfid');var folderSelected=selectField.options[selectField.selectedIndex].value;photosStartAt=photosStartAt+10;showPhotos(folderSelected,photosStartAt);break;case"btn_insert_album":YAHOO.util.Event.stopEvent(e);var url='';var buttons=document.getElementsByName('select-from-album-url');for(var i=0;i<buttons.length;i++){if(buttons[i].checked){url=buttons[i].value;break;}}
var node=YAHOO.util.Dom.get('dialogue-container');if(node.selectedRange.select){node.selectedRange.select();}
url=url.replace(/^\s+|\s+$/g,"");if(verifyUrl(url)){rte.m_editor.contentWindow.document.execCommand("InsertImage",false,url);rte.m_editor.contentWindow.focus();loader.clear();}else{if(!document.getElementById('warning')){var divWarning=document.createElement('div');divWarning.id='warning';divWarning.innerHTML='Bn cha chn nh no  chn vo bi vit. Hy chn nh hoc a URL vo.';var addTo=YAHOO.util.Dom.getElementsByClassName('ctnr','div','edit-panel-rte-upload');addTo[0].parentNode.insertBefore(divWarning,addTo[0]);}}
break;case"btn_insert_url":YAHOO.util.Event.stopEvent(e);var node=YAHOO.util.Dom.get('dialogue-container');if(node.selectedRange.select){node.selectedRange.select();}
var url=document.getElementById('image-url').value;url=url.replace(/^\s+|\s+$/g,"");if(verifyUrl(url)){rte.m_editor.contentWindow.document.execCommand("InsertImage",false,url);rte.m_editor.contentWindow.focus();loader.clear();}else{if(!document.getElementById('warning')){var divWarning=document.createElement('div');divWarning.id='warning';divWarning.innerHTML='Bn cha chn nh no  chn vo bi vit. Hy chn nh hoc a URL vo.';var addTo=YAHOO.util.Dom.getElementsByClassName('ctnr','div','edit-panel-rte-upload');addTo[0].parentNode.insertBefore(divWarning,addTo[0]);}}
break;}}}};})();(function(){YAHOO.util.Event.onContentReady('tag-friend',function(){var tagFriendsInit=function(){var ulEl=document.getElementById("tag-friend").getElementsByTagName("ul")[0];var loader=YAHOO.Blog.dialogueLoader;var panelClickHandler=function(e){var target=YAHOO.util.Event.getTarget(e);if(target.tagName.toLowerCase()=="img")target=target.parentNode;var cName=target.className;var xhrLoad=function(e){YAHOO.util.Event.stopEvent(e);var postData,hiddenEl=document.getElementById("selectFriends");if(hiddenEl){postData="selects="+hiddenEl.value;}
loader.load({method:"POST",url:target.href,data:postData});}
switch(cName){case"btn_save":var rootEl=document.getElementById("add-friends");var checkboxArr=YAHOO.util.Dom.getElementsByClassName("yuid","input",rootEl);var linkElArr=YAHOO.util.Dom.getElementsByClassName("nickname","a",rootEl);var listArr=[];for(var i=0,j=checkboxArr.length;i<j;i++){if(checkboxArr[i].checked){listArr[listArr.length]='<li><a href="'+linkElArr[i].href+'">'+linkElArr[i].innerHTML+'</a><input type="hidden" name="tag_friends[]" value="'+checkboxArr[i].id+'" /> [<a id="btn_remove_'+checkboxArr[i].id+'" href="">'+YAHOO.Blog.Config.Text.DELETE+'</a>]</li>';}}
ulEl.innerHTML+=listArr.join("");ulEl.parentNode.style.display='block';loader.clear();break;case"prev":xhrLoad(e);break;case"next":xhrLoad(e);break;case"cat":xhrLoad(e);break;case"photo":YAHOO.util.Event.stopEvent(e);var checkbox=target.parentNode.getElementsByTagName("input")[0];checkbox.checked=!checkbox.checked;break;case"btn_close":YAHOO.util.Event.stopEvent(e);loader.clear();break;}};var clickHandler=function(e){var postData,target=YAHOO.util.Event.getTarget(e);var targetIdArray=target.id.split('_');switch(targetIdArray[1]){case"add":YAHOO.util.Event.stopEvent(e);var taggedFrds=document.blog_compose["tag_friends[]"];if(taggedFrds){if(taggedFrds.length){var yuidArr=[];for(var i=0;i<taggedFrds.length;i++){yuidArr[i]=taggedFrds[i].value;}
postData="selects="+yuidArr.join(",");}else if(taggedFrds.form){postData="selects="+taggedFrds.value;}}
loader.clickHandler=panelClickHandler;loader.load({method:"POST",url:target.href,data:postData});break;case"remove":YAHOO.util.Event.stopEvent(e);target.parentNode.parentNode.removeChild(target.parentNode);break;}};YAHOO.util.Event.addListener("tag-friend",'click',clickHandler);}();});})();
(function(){if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObject.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObject.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return"";}};deconcept.SWFObjectUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObject.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;var global="YAHOO.CAPTCHA";if(typeof(YAHOO)==="undefined"){YAHOO={};}
if(typeof(YAHOO.CAPTCHA)==="undefined"){YAHOO.CAPTCHA={};}
function bind(method,obj){var args=Array.prototype.splice.call(arguments,[2]);return function(){return method.apply(obj,args);};}
function AudioCaptcha(o){var self=this;this.id=o.id;this.prefix=o.prefix;this.autoPlay=null;this.embeddedAudio={"audioHost":o.audioHost,"flashHost":o.flashHost};this.swfReady=function(){if(self.autoPlay){self.playAudio();}};this.audioComplete=function(){self.setAudioStoppedLabel();}}
AudioCaptcha.prototype.addCaptchaEvents=function(){var displayControlsObj=document.getElementById(this.prefix+"DisplayControls");if(displayControlsObj!==null){displayControlsObj.getElementsByTagName("button")[0].onclick=bind(this.toggleAudioVisualCaptcha,this);document.getElementById(this.prefix+"AudioCaptchaImage").getElementsByTagName("button")[0].onclick=bind(this.replayAudioCaptcha,this);var buttons=document.getElementById(this.prefix+"ContentBox").getElementsByTagName("button"),length=buttons.length;while(length--){if(buttons[length].className==="captchaButReplay"){buttons[length].onclick=bind(this.replayAudioCaptcha,this);}}}};AudioCaptcha.prototype.setReplayButton=function(){var labelFld=document.getElementById(this.prefix+"ReplayBtnReplayLbl");if(labelFld!==null){document.getElementById(this.prefix+"ReplayBtnLbl").innerHTML=labelFld.innerHTML;}};AudioCaptcha.prototype.setAudioStoppedLabel=function(){var labelFld=document.getElementById(this.prefix+"AudioStoppedLbl");if(labelFld!=null){document.getElementById(this.prefix+"AudioStatusLbl").innerHTML=labelFld.innerHTML;}};AudioCaptcha.prototype.setAudioPlayingLabel=function(){var labelFld=document.getElementById(this.prefix+"AudioPlayingLbl");if(labelFld!==null){document.getElementById(this.prefix+"AudioStatusLbl").innerHTML=labelFld.innerHTML;}};AudioCaptcha.prototype.playAudio=function(){var viewFld=document.getElementById(this.prefix+"View"),inputFld=document.getElementById(this.prefix+"Answer");if(viewFld==null||viewFld.value==='audio'){document.getElementById(this.prefix+"cplayer").playit();this.setReplayButton();this.setAudioPlayingLabel();if(inputFld!=null){inputFld.focus();}}};AudioCaptcha.prototype.stopAudio=function(){document.getElementById(this.prefix+"cplayer").stopit();this.setAudioStoppedLabel();};AudioCaptcha.prototype.embedAudio=function(params){var url,swfObj;this.autoPlay=!!params.force;if(typeof(params.url)==="undefined"||params.url===''){var audioIdObj=document.getElementById(this.prefix+"AudioCaptchaId");if(audioIdObj==null){url='unknown.mp3';}else{var audioId=document.getElementById(this.prefix+"AudioCaptchaId").value;url=this.embeddedAudio.audioHost+"/snd/"+audioId+".mp3";}}else{url=params.url;}
var jsObjName=global+"."+this.id+".";swfObj=new SWFObject(this.embeddedAudio.flashHost+"/cplayer.swf",this.prefix+"cplayer","1","1","8");swfObj.addParam("allowScriptAccess","always");swfObj.addVariable("captchaURL",url);swfObj.addVariable("jsObjName",global+"."+this.id+".");swfObj.write(this.prefix+"cplayerdiv");};AudioCaptcha.prototype.replayAudioCaptcha=function(){this.stopAudio();this.playAudio();this.setAudioPlayingLabel();var inputFld=document.getElementById(this.prefix+"Answer");inputFld.focus();};AudioCaptcha.prototype.toggleAudioVisualCaptcha=function(){var prefix=this.prefix,captchaAnswerElm=document.getElementById(prefix+'Answer'),captchaViewElm=document.getElementById(prefix+'View'),captchaView;captchaAnswerElm.value="";captchaAnswerElm.focus();captchaView=(captchaViewElm.value==='visual')?'Audio':'Visual';captchaViewElm.value=captchaView.toLowerCase();if(captchaView==='Audio'){this.playAudio();}else{this.stopAudio();}
document.getElementById(prefix+'ButSwapLbl').innerHTML=document.getElementById(prefix+captchaView+'CaptchaButSwapLbl').innerHTML;document.getElementById(prefix+'BoxDisplay').className="captchaBoxDisplay "+captchaViewElm.value;document.getElementById(prefix+'ContentBox').innerHTML=document.getElementById(prefix+captchaView+'CaptchaImage').innerHTML;document.getElementById(prefix+'Instructions').innerHTML=document.getElementById(prefix+captchaView+'CaptchaInstructions').innerHTML;YAHOO.CAPTCHA.broadcast("toggle",this.id);};YAHOO.CAPTCHA.addAudioCaptcha=function(params){var id=params.id||"v5";YAHOO.CAPTCHA[id]=new AudioCaptcha({"id":id,"prefix":params.prefix+"captcha","audioHost":params.audioHost||"","flashHost":params.flashHost||""});YAHOO.CAPTCHA[id].addCaptchaEvents();YAHOO.CAPTCHA[id].embedAudio(params);YAHOO.CAPTCHA.subscribe("toggle",bind(YAHOO.CAPTCHA[id].addCaptchaEvents,YAHOO.CAPTCHA[id]),id);YAHOO.CAPTCHA.subscribe("refresh",bind(YAHOO.CAPTCHA[id].addCaptchaEvents,YAHOO.CAPTCHA[id]),id);};})();
(function(){var isIE;function getXMLReqObj(){var xmlReqObj=null;if(window.ActiveXObject){xmlReqObj=new ActiveXObject("Microsoft.XMLHTTP");isIE=true;}else{xmlReqObj=new XMLHttpRequest();isIE=false;}
return xmlReqObj;}
function bind(method,obj){var args=Array.prototype.splice.call(arguments,[2]);return function(){return method.apply(obj,args);};}
function getValueByTagName(name,parent){var par=parent||document,tag=par.getElementsByTagName(name);if(tag&&tag.length){return tag[0].firstChild.nodeValue;}
return'';}
function Captcha(obj){this.prefix=obj.prefix;this.id=obj.id;this.ajaxUrl=obj.proxyAddr;this.isShuffling=null;this.captchaView=null;}
Captcha.prototype.makeRequest=function(url,callback,scope){var xmlReqObj=getXMLReqObj();xmlReqObj.open("GET",url,true);xmlReqObj.setRequestHeader('Content-Type','text/xml');xmlReqObj.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT");xmlReqObj.onreadystatechange=function(){if(xmlReqObj.readyState==4){callback.success.call(scope,xmlReqObj);}};xmlReqObj.send(null);};Captcha.prototype.addCaptchaEvents=function(){var buttonsObj=document.getElementById(this.prefix+"Content");if(!!buttonsObj){var buttons=buttonsObj.getElementsByTagName("button"),length=buttons.length;while(length--){if(buttons[length].className==="captchaButTry"){buttons[length].onclick=bind(this.onShuffleCaptcha,this);}}
document.getElementById(this.prefix+"Header").getElementsByTagName("a")[0].onclick=this.Help;}}
Captcha.prototype.Help=function(e){e=e||event;var targ=e.target||e.srcElement;window.open(targ.href,"help","width=500,height=585,scrollbars=yes,dependent=yes");if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}
return false;};Captcha.prototype.loadShuffleResult=function(resp){var data="";try{data=YAHOO.lang.JSON.parse(resp.responseText);}catch(err){}
if(data.CaptchaTypes){if(data.CaptchaTypes.ClassicCaptcha){var id_el=document.getElementById(this.prefix+"ClassicCaptchaId");if(!!id_el){id_el.value=data.CaptchaTypes.ClassicCaptcha.TestId;}
var img_el=document.getElementById(this.prefix+"ClassicCaptchaImg");if(!!img_el){img_el.src=data.CaptchaTypes.ClassicCaptcha.ImgUrl;}}
if(data.CaptchaTypes.AudioCaptcha){var id_el=document.getElementById(this.prefix+"AudioCaptchaId");if(!!id_el){id_el.value=data.CaptchaTypes.AudioCaptcha.TestId;}}}
if(data.HiddenData){var lang_el=document.getElementById(this.prefix+"Lang");if(!!lang_el){lang_el.value=data.HiddenData.lang;}
var cdata_el=document.getElementById(this.prefix+"Cdata");if(!!cdata_el){cdata_el.value=data.HiddenData.cdata;}
var classInfo_el=document.getElementById(this.prefix+"ClassInfo");if(!!classInfo_el){classInfo_el.value=data.HiddenData.captchaClassInfo;}}
if(typeof(YAHOO.CAPTCHA[this.id].embedAudio)!=='undefined'){if(typeof(this.captchaView)==='undefined'){this.captchaView='';}
YAHOO.CAPTCHA[this.id].embedAudio({url:'',force:this.captchaView==='audio'});}
var inputFld=document.getElementById(this.prefix+"Answer");inputFld.focus();this.isShuffling=false;this.addCaptchaEvents();YAHOO.CAPTCHA.broadcast("refresh",this.id);};Captcha.prototype.onShuffleCaptcha=function(contentMode){var ajaxParams,xmlReqObj;if(typeof(contentMode)==="undefined")contentMode="data";if(typeof(this.isShuffling)!=='undefined'&&this.isShuffling){return;}
this.isShuffling=true;ajaxParams="cdata="+document.getElementById(this.prefix+"Cdata").value;ajaxParams+="&lang="+document.getElementById(this.prefix+"Lang").value;ajaxParams+="&content_mode="+contentMode;ajaxParams+="&action=shuffle";if(document.getElementById(this.prefix+"View")!=null){this.captchaView=document.getElementById(this.prefix+"View").value;ajaxParams+="&initial_view="+this.captchaView;}
this.makeRequest(this.ajaxUrl+"?"+ajaxParams,{success:this.loadShuffleResult},this);};if(typeof(YAHOO)==="undefined"){YAHOO={};}
if(typeof(YAHOO.CAPTCHA)==="undefined"){YAHOO.CAPTCHA={};}
if(typeof(YAHOO.CAPTCHA.items)==="undefined"){YAHOO.CAPTCHA.items=[];}
if(typeof(YAHOO.CAPTCHA.events)==="undefined"){YAHOO.CAPTCHA.events={};}
YAHOO.CAPTCHA.broadcast=function(eventName,constraint){if(typeof(YAHOO.CAPTCHA.events[eventName])!=="undefined"){var subs=YAHOO.CAPTCHA.events[eventName].subscribers,index,len=subs.length,check=constraint||"";for(index=0;index<len;index++){if(subs[index].constraint===check){subs[index].callback();}}}};YAHOO.CAPTCHA.subscribe=function(eventName,func,constraint){if(typeof(YAHOO.CAPTCHA.events[eventName])==="undefined"){YAHOO.CAPTCHA.events[eventName]={subscribers:[]};}
YAHOO.CAPTCHA.events[eventName].subscribers.push({"constraint":constraint||"","callback":func});};YAHOO.CAPTCHA.addCaptcha=function(params){var id=params.id||"V5",len=YAHOO.CAPTCHA.items.length;lazyload=false;YAHOO.CAPTCHA.items[len]=new Captcha({"id":id,"prefix":params.prefix+"captcha","proxyAddr":params.proxyAddr});YAHOO.CAPTCHA.items[len].addCaptchaEvents();YAHOO.CAPTCHA.subscribe("toggle",bind(YAHOO.CAPTCHA.items[len].addCaptchaEvents,YAHOO.CAPTCHA.items[len]),id);return len;};})();
(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},UNDEFINED='undefined',OBJECT='object',NULL='null',STRING='string',NUMBER='number',BOOLEAN='boolean',DATE='date',_allowable={'undefined':UNDEFINED,'string':STRING,'[object String]':STRING,'number':NUMBER,'[object Number]':NUMBER,'boolean':BOOLEAN,'[object Boolean]':BOOLEAN,'[object Date]':DATE,'[object RegExp]':OBJECT},EMPTY='',OPEN_O='{',CLOSE_O='}',OPEN_A='[',CLOSE_A=']',COMMA=',',COMMA_CR=",\n",CR="\n",COLON=':',COLON_SP=': ',QUOTE='"';Native=_toStr.call(Native)==='[object JSON]'&&Native;function _char(c){if(!_CHARS[c]){_CHARS[c]='\\u'+('0000'+(+(c.charCodeAt(0))).toString(16)).slice(-4);}
return _CHARS[c];}
function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==='object'){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k];}else{value[k]=v;}}}}
return reviver.call(o,key,value);};return typeof reviver==='function'?walk({'':data},''):data;}
function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char);}
function _isSafe(str){return l.isString(str)&&_UNSAFE.test(str.replace(_ESCAPES,'@').replace(_VALUES,']').replace(_BRACKETS,''));}
function _parse(s,reviver){s=_prepare(s);if(_isSafe(s)){return _revive(eval('('+s+')'),reviver);}
throw new SyntaxError('JSON.parse');}
function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?(o?OBJECT:NULL):UNDEFINED);}
function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,_char)+QUOTE;}
function _indent(s,space){return s.replace(/^/gm,space);}
function _stringify(o,w,space){if(o===undefined){return undefined;}
var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w)){w=undefined;}
if(w){tmp={};for(i=0,len=w.length;i<len;++i){tmp[w[i]]=true;}
w=tmp;}
space=format[0]==='Number'?new Array(Math.min(Math.max(0,space),10)+1).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON)){value=value.toJSON(key);}else if(t===DATE){value=_date(value);}
if(isFunction(replacer)){value=replacer.call(h,key,value);}
if(value!==h[key]){t=_type(value);}
switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined;}
for(i=stack.length-1;i>=0;--i){if(stack[i]===value){throw new Error("JSON.stringify. Cyclical reference");}}
arr=isArray(value);stack.push(value);if(arr){for(i=value.length-1;i>=0;--i){a[i]=_serialize(value,i)||NULL;}}else{keys=w||value;i=0;for(k in keys){if(keys.hasOwnProperty(k)){v=_serialize(value,k);if(v){a[i++]=_string(k)+colon+v;}}}}
stack.pop();if(space&&a.length){return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O;}else{return arr?OPEN_A+a.join(COMMA)+CLOSE_A:OPEN_O+a.join(COMMA)+CLOSE_O;}}
return _serialize({'':o},'');}
YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s));},parse:function(s,reviver){return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver);},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space);},dateToString:function(d){function _zeroPad(v){return v<10?'0'+v:v;}
return d.getUTCFullYear()+'-'+
_zeroPad(d.getUTCMonth()+1)+'-'+
_zeroPad(d.getUTCDate())+'T'+
_zeroPad(d.getUTCHours())+COLON+
_zeroPad(d.getUTCMinutes())+COLON+
_zeroPad(d.getUTCSeconds())+'Z';},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date();d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],(m[7]||0));return d;}
return str;}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe;})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.0r4",build:"2446"});